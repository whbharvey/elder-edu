(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5295],{12592:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>X});var a=l(95155),t=l(12115),n=l(97605),r=l(20778),i=l(35125),c=l(1175),d=l(44670),o=l(19361),h=l(74947),m=l(56020),x=l(10642),u=l(85231),j=l(19868),A=l(46002),p=l(26922),y=l(37974),g=l(12320),v=l(59474),f=l(30662),b=l(27212),w=l(6124),k=l(85),N=l(18866),C=l(85189),S=l(21103),I=l(79659),T=l(70129),M=l(56170),F=l(98716),q=l(13921),z=l(16913),H=l(46996),P=l(88870),L=l(34140),O=l(91573),V=l(30832),B=l.n(V),_=l(79298);let{Title:E,Text:K,Paragraph:D}=n.A,{Option:Y}=r.A,{TabPane:G}=i.A,{RangePicker:R}=c.A,$=[{value:"A101",label:"A101 (30人)"},{value:"A102",label:"A102 (25人)"},{value:"B203",label:"B203 (35人)"},{value:"B204",label:"B204 (40人)"},{value:"C105",label:"C105 (20人)"},{value:"C106",label:"C106 (30人)"}],J=[{id:1,name:"刘明",phone:"13800138001",seatNumber:"1-1"},{id:2,name:"王芳",phone:"13800138002",seatNumber:"1-2"},{id:3,name:"陈伟",phone:"13800138003",seatNumber:"2-3"}],Q=e=>{let s=[];if(e<=20){let l=[3,4,5,6],a=1;for(let t=1;t<=4&&a<=e;t++){let n=l[t-1];for(let l=1;l<=n&&a<=e;l++){let e=Math.random()>.7,n=e?["张三","李四","王五","赵六","孙七","周八"][Math.floor(6*Math.random())]:null;s.push({id:"".concat(t,"-").concat(l),row:t,col:l,status:e?"locked":"available",studentId:e?Math.floor(100*Math.random())+1:null,studentName:n}),a++}}}else if(e<=30){let l=[4,5,6,7,8],a=1;for(let t=1;t<=5&&a<=e;t++){let n=l[t-1];for(let l=1;l<=n&&a<=e;l++){let e=Math.random()>.6,n=e?["张三","李四","王五","赵六","孙七","周八"][Math.floor(6*Math.random())]:null;s.push({id:"".concat(t,"-").concat(l),row:t,col:l,status:e?"locked":"available",studentId:e?Math.floor(100*Math.random())+1:null,studentName:n}),a++}}}else{let l=[6,8,10,12,12,10,8,6],a=1;for(let t=1;t<=8&&a<=e;t++){let n=Math.min(l[t-1],e-a+1);for(let l=1;l<=n&&a<=e;l++){let e=Math.random()>.65,n=e?["张三","李四","王五","赵六","孙七","周八"][Math.floor(6*Math.random())]:null;s.push({id:"".concat(t,"-").concat(l),row:t,col:l,status:e?"locked":"available",studentId:e?Math.floor(100*Math.random())+1:null,studentName:n}),a++}}}return s},U=[{id:1,name:"太极拳基础班",category:"体育健身",level:"基础班",teacher:"王老师",classTeacher:"刘老师",classTeacherPhone:"13800138010",weekday:"周一",timeSlot:"09:00-11:00",capacity:30,enrolled:28,minAge:50,maxAge:80,fee:200,semester:"2024春季",classroom:"A101",status:"招生中",sessions:16,students:J.slice(0,28),seats:Q(30),createdAt:"2024-01-10 14:30:25"},{id:2,name:"书法提高班",category:"文化艺术",level:"提高班",teacher:"李老师",classTeacher:"陈老师",classTeacherPhone:"13800138011",weekday:"周三",timeSlot:"14:00-16:00",capacity:25,enrolled:25,minAge:55,maxAge:85,fee:300,semester:"2024春季",classroom:"B203",status:"已满员",sessions:20,students:J.slice(0,25),seats:Q(25),createdAt:"2024-01-12 09:15:38"},{id:3,name:"摄影基础班",category:"兴趣爱好",level:"基础班",teacher:"张老师",classTeacher:"王老师",classTeacherPhone:"13800138012",weekday:"周五",timeSlot:"09:00-11:00",capacity:20,enrolled:15,minAge:50,maxAge:75,fee:250,semester:"2024春季",classroom:"C105",status:"招生中",sessions:12,students:J.slice(0,15),seats:Q(20),createdAt:"2024-01-15 16:45:12"},{id:4,name:"声乐入门班",category:"文化艺术",level:"基础班",teacher:"赵老师",classTeacher:"孙老师",classTeacherPhone:"13800138013",weekday:"周二",timeSlot:"14:00-16:00",capacity:20,enrolled:18,minAge:45,maxAge:75,fee:280,semester:"2024春季",classroom:"A102",status:"招生中",sessions:18,students:J.slice(0,18),seats:Q(20),createdAt:"2024-01-18 10:20:45"},{id:5,name:"国画山水班",category:"文化艺术",level:"提高班",teacher:"钱老师",classTeacher:"周老师",classTeacherPhone:"13800138014",weekday:"周四",timeSlot:"09:00-11:00",capacity:15,enrolled:12,minAge:50,maxAge:80,fee:350,semester:"2024春季",classroom:"B204",status:"招生中",sessions:24,students:J.slice(0,12),seats:Q(15),createdAt:"2024-01-20 11:35:52"},{id:6,name:"健身操基础班",category:"体育健身",level:"基础班",teacher:"吴老师",classTeacher:"郑老师",classTeacherPhone:"13800138015",weekday:"周一",timeSlot:"14:00-16:00",capacity:35,enrolled:30,minAge:45,maxAge:70,fee:180,semester:"2024春季",classroom:"C106",status:"招生中",sessions:16,students:J.slice(0,30),seats:Q(35),createdAt:"2024-01-25 14:40:18"},{id:7,name:"计算机基础班",category:"兴趣爱好",level:"基础班",teacher:"冯老师",classTeacher:"陈老师",classTeacherPhone:"13800138016",weekday:"周三",timeSlot:"09:00-11:00",capacity:25,enrolled:22,minAge:50,maxAge:75,fee:320,semester:"2024春季",classroom:"A101",status:"招生中",sessions:20,students:J.slice(0,22),seats:Q(25),createdAt:"2024-01-28 09:05:33"},{id:8,name:"太极拳基础班",category:"体育健身",level:"基础班",teacher:"王老师",classTeacher:"刘老师",classTeacherPhone:"13800138010",weekday:"周一",timeSlot:"09:00-11:00",capacity:30,enrolled:30,minAge:50,maxAge:80,fee:200,semester:"2023秋季",classroom:"A101",status:"已结束",sessions:16,students:J.slice(0,30),seats:Q(30),createdAt:"2023-08-15 10:20:45"},{id:9,name:"书法基础班",category:"文化艺术",level:"基础班",teacher:"李老师",classTeacher:"陈老师",classTeacherPhone:"13800138011",weekday:"周三",timeSlot:"14:00-16:00",capacity:25,enrolled:24,minAge:55,maxAge:85,fee:280,semester:"2023秋季",classroom:"B203",status:"已结束",sessions:18,students:J.slice(0,24),seats:Q(25),createdAt:"2023-08-18 14:35:27"},{id:10,name:"摄影入门班",category:"兴趣爱好",level:"基础班",teacher:"张老师",classTeacher:"王老师",classTeacherPhone:"13800138012",weekday:"周五",timeSlot:"09:00-11:00",capacity:20,enrolled:18,minAge:50,maxAge:75,fee:240,semester:"2023秋季",classroom:"C105",status:"已结束",sessions:12,students:J.slice(0,18),seats:Q(20),createdAt:"2023-08-22 11:15:40"}],W=e=>{let{form:s}=e;return(0,a.jsxs)(d.A,{form:s,layout:"vertical",children:[(0,a.jsx)(o.A,{children:(0,a.jsx)(h.A,{span:24,children:(0,a.jsx)(d.A.Item,{name:"name",label:"课程名称",rules:[{required:!0,message:"请输入课程名称"}],children:(0,a.jsx)(m.A,{placeholder:"请输入课程名称"})})})}),(0,a.jsxs)(o.A,{gutter:16,children:[(0,a.jsx)(h.A,{span:8,children:(0,a.jsx)(d.A.Item,{name:"semester",label:"学期",rules:[{required:!0,message:"请选择学期"}],children:(0,a.jsxs)(r.A,{placeholder:"请选择学期",children:[(0,a.jsx)(Y,{value:"2024春季",children:"2024春季"}),(0,a.jsx)(Y,{value:"2024秋季",children:"2024秋季"}),(0,a.jsx)(Y,{value:"2025春季",children:"2025春季"})]})})}),(0,a.jsx)(h.A,{span:8,children:(0,a.jsx)(d.A.Item,{name:"category",label:"课程类别",rules:[{required:!1,message:"请选择课程类别"}],children:(0,a.jsxs)(r.A,{placeholder:"请选择课程类别",children:[(0,a.jsx)(Y,{value:"体育健身",children:"体育健身"}),(0,a.jsx)(Y,{value:"文化艺术",children:"文化艺术"}),(0,a.jsx)(Y,{value:"兴趣爱好",children:"兴趣爱好"})]})})}),(0,a.jsx)(h.A,{span:8,children:(0,a.jsx)(d.A.Item,{name:"level",label:"课程级别",rules:[{required:!1,message:"请选择课程级别"}],children:(0,a.jsxs)(r.A,{placeholder:"请选择课程级别",children:[(0,a.jsx)(Y,{value:"基础班",children:"基础班"}),(0,a.jsx)(Y,{value:"提高班",children:"提高班"}),(0,a.jsx)(Y,{value:"高级班",children:"高级班"})]})})})]}),(0,a.jsxs)(o.A,{gutter:16,children:[(0,a.jsx)(h.A,{span:8,children:(0,a.jsx)(d.A.Item,{name:"fee",label:"学费",rules:[{required:!0,message:"请输入学费"}],children:(0,a.jsx)(x.A,{min:0,placeholder:"请输入学费",prefix:"\xa5",style:{width:"100%"}})})}),(0,a.jsx)(h.A,{span:8,children:(0,a.jsx)(d.A.Item,{name:"teacher",label:"授课教师",rules:[{required:!0,message:"请输入授课教师"}],children:(0,a.jsx)(m.A,{placeholder:"请输入授课教师"})})}),(0,a.jsx)(h.A,{span:8,children:(0,a.jsx)(d.A.Item,{name:"classroom",label:"教室",rules:[{required:!0,message:"请选择教室"}],children:(0,a.jsx)(r.A,{placeholder:"请选择教室",children:$.map(e=>(0,a.jsx)(Y,{value:e.value,children:e.label},e.value))})})})]}),(0,a.jsxs)(o.A,{gutter:16,children:[(0,a.jsx)(h.A,{span:8,children:(0,a.jsx)(d.A.Item,{name:"weekday",label:"上课星期",rules:[{required:!0,message:"请选择上课星期"}],children:(0,a.jsxs)(r.A,{placeholder:"请选择星期",children:[(0,a.jsx)(Y,{value:"周一",children:"周一"}),(0,a.jsx)(Y,{value:"周二",children:"周二"}),(0,a.jsx)(Y,{value:"周三",children:"周三"}),(0,a.jsx)(Y,{value:"周四",children:"周四"}),(0,a.jsx)(Y,{value:"周五",children:"周五"}),(0,a.jsx)(Y,{value:"周六",children:"周六"}),(0,a.jsx)(Y,{value:"周日",children:"周日"})]})})}),(0,a.jsx)(h.A,{span:8,children:(0,a.jsx)(d.A.Item,{name:"timeSlot",label:"上课时间",rules:[{required:!0,message:"请选择上课时间"}],children:(0,a.jsx)(u.A.RangePicker,{format:"HH:mm",placeholder:["开始时间","结束时间"]})})}),(0,a.jsx)(h.A,{span:8,children:(0,a.jsx)(d.A.Item,{name:"sessions",label:"课次数",rules:[{required:!0,message:"请输入课次数"}],children:(0,a.jsx)(x.A,{min:1,max:50,placeholder:"请输入课次数",style:{width:"100%"}})})})]}),(0,a.jsxs)(o.A,{gutter:16,children:[(0,a.jsx)(h.A,{span:8,children:(0,a.jsx)(d.A.Item,{name:"capacity",label:"招生人数",rules:[{required:!0,message:"请输入招生人数"}],children:(0,a.jsx)(x.A,{min:1,max:100,placeholder:"请输入招生人数",style:{width:"100%"}})})}),(0,a.jsx)(h.A,{span:8,children:(0,a.jsx)(d.A.Item,{name:"minAge",label:"最小年龄",rules:[{required:!1,message:"请输入最小年龄"}],children:(0,a.jsx)(x.A,{min:18,max:100,placeholder:"最小年龄",style:{width:"100%"}})})}),(0,a.jsx)(h.A,{span:8,children:(0,a.jsx)(d.A.Item,{name:"maxAge",label:"最大年龄",rules:[{required:!1,message:"请输入最大年龄"}],children:(0,a.jsx)(x.A,{min:18,max:100,placeholder:"最大年龄",style:{width:"100%"}})})})]}),(0,a.jsxs)(o.A,{gutter:16,children:[(0,a.jsx)(h.A,{span:8,children:(0,a.jsx)(d.A.Item,{name:"classTeacher",label:"班主任姓名",rules:[{required:!0,message:"请输入班主任姓名"}],children:(0,a.jsx)(m.A,{placeholder:"请输入班主任姓名"})})}),(0,a.jsx)(h.A,{span:8,children:(0,a.jsx)(d.A.Item,{name:"classTeacherPhone",label:"班主任联系方式",rules:[{required:!0,message:"请输入班主任联系方式"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码"}],children:(0,a.jsx)(m.A,{placeholder:"请输入班主任手机号"})})})]}),(0,a.jsx)(o.A,{gutter:16,children:(0,a.jsx)(h.A,{span:16,children:(0,a.jsx)(d.A.Item,{name:"remarks",label:"备注",rules:[{required:!1,message:"请输入备注信息"}],children:(0,a.jsx)(_.A,{placeholder:"请输入备注信息",rows:4,showCount:!0,maxLength:200})})})})]})};function X(){var e,s,l;let[n,c]=(0,t.useState)(U),[x,u]=(0,t.useState)(""),[V,_]=(0,t.useState)(!1),[$,J]=(0,t.useState)(!1),[X,Z]=(0,t.useState)(null),[ee,es]=(0,t.useState)("list"),[el,ea]=(0,t.useState)(!1),[et,en]=(0,t.useState)("basic"),[er,ei]=(0,t.useState)(""),[ec,ed]=(0,t.useState)({}),[eo,eh]=(0,t.useState)(!1),[em,ex]=(0,t.useState)(""),[eu]=d.A.useForm(),[ej]=d.A.useForm(),[eA]=d.A.useForm(),ep=n.filter(e=>e.name.toLowerCase().includes(x.toLowerCase())||e.teacher.toLowerCase().includes(x.toLowerCase())||e.category.toLowerCase().includes(x.toLowerCase())),ey=[{id:1,name:"张三",phone:"13800138001",age:65},{id:2,name:"李四",phone:"13800138002",age:68},{id:3,name:"王五",phone:"13800138003",age:62},{id:4,name:"赵六",phone:"13800138004",age:70},{id:5,name:"孙七",phone:"13800138005",age:58},{id:6,name:"周八",phone:"13800138006",age:72},{id:7,name:"吴九",phone:"13800138007",age:66},{id:8,name:"郑十",phone:"13800138008",age:64}],eg=()=>n.filter(e=>e.semester===er),ev=(e,s)=>{let l="".concat(e,"-").concat(s);ed(e=>({...e,[l]:!e[l]}))},ef=e=>{Z(e),eu.setFieldsValue({...e,timeSlot:e.timeSlot?[B()(e.timeSlot.split("-")[0],"HH:mm"),B()(e.timeSlot.split("-")[1],"HH:mm")]:null}),ea(!0),en("basic")},eb=e=>{c(n.filter(s=>s.id!==e)),j.Ay.success("课程删除成功")},ew=e=>{let s={...e,id:Math.max(...n.map(e=>e.id))+1,name:"".concat(e.name," (复制)"),enrolled:0,status:"招生中",students:[],seats:Q(e.capacity)};c([...n,s]),j.Ay.success("课程复制成功")},ek=e=>{if(!X)return;let s=X.seats.find(s=>s.id===e);if(s){if("locked"===s.status&&s.studentName){let s=X.seats.map(s=>s.id===e?{...s,status:"available",studentId:null,studentName:null}:s),l={...X,seats:s};Z(l),c(n.map(e=>e.id===X.id?l:e)),j.Ay.success("座位已解锁")}else"available"===s.status&&(ex(e),eh(!0))}},eN=e=>{switch(e){case"招生中":return(0,a.jsx)(y.A,{color:"success",children:"招生中"});case"已满员":return(0,a.jsx)(y.A,{color:"warning",children:"已满员"});case"已结束":return(0,a.jsx)(y.A,{color:"default",children:"已结束"});default:return(0,a.jsx)(y.A,{color:"default",children:e})}},eC=e=>{switch(e){case"体育健身":return(0,a.jsx)(y.A,{color:"blue",children:e});case"文化艺术":return(0,a.jsx)(y.A,{color:"purple",children:e});case"兴趣爱好":return(0,a.jsx)(y.A,{color:"green",children:e});default:return(0,a.jsx)(y.A,{children:e})}},eS=e=>{switch(e){case"available":return"#52c41a";case"locked":return"#ff4d4f";default:return"#d9d9d9"}},eI=[{title:"课程名称",dataIndex:"name",key:"name",sorter:(e,s)=>e.name.localeCompare(s.name),render:e=>(0,a.jsx)("a",{children:e})},{title:"类别",dataIndex:"category",key:"category",filters:[{text:"体育健身",value:"体育健身"},{text:"文化艺术",value:"文化艺术"},{text:"兴趣爱好",value:"兴趣爱好"}],onFilter:(e,s)=>s.category===e,render:e=>eC(e)},{title:"上课时间",key:"schedule",render:(e,s)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:s.weekday}),(0,a.jsx)(K,{type:"secondary",children:s.timeSlot})]})},{title:"课次",dataIndex:"sessions",key:"sessions",sorter:(e,s)=>e.sessions-s.sessions,render:e=>(0,a.jsxs)("span",{children:[e,"次"]})},{title:"学期",dataIndex:"semester",key:"semester",filters:[{text:"2024春季",value:"2024春季"},{text:"2023秋季",value:"2023秋季"}],onFilter:(e,s)=>s.semester===e,render:e=>(0,a.jsx)(y.A,{color:"cyan",children:e})},{title:"报名情况",key:"enrollment",render:(e,s)=>(0,a.jsxs)(g.A,{direction:"vertical",size:"small",style:{width:"100%"},children:[(0,a.jsxs)("span",{children:[s.enrolled,"/",s.capacity]}),(0,a.jsx)(v.A,{percent:Math.round(s.enrolled/s.capacity*100),size:"small",status:s.enrolled>=s.capacity?"success":"active"})]})},{title:"学费",dataIndex:"fee",key:"fee",sorter:(e,s)=>e.fee-s.fee,render:e=>(0,a.jsxs)("span",{children:["\xa5",e]})},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",sorter:(e,s)=>new Date(e.createdAt).getTime()-new Date(s.createdAt).getTime(),render:e=>(0,a.jsx)("span",{children:e})},{title:"状态",dataIndex:"status",key:"status",filters:[{text:"招生中",value:"招生中"},{text:"已满员",value:"已满员"},{text:"已结束",value:"已结束"}],onFilter:(e,s)=>s.status===e,render:e=>eN(e)},{title:"操作",key:"action",render:(e,s)=>(0,a.jsxs)(g.A,{size:"small",children:[(0,a.jsx)(p.A,{title:"编辑",children:(0,a.jsx)(f.Ay,{type:"text",icon:(0,a.jsx)(I.A,{}),onClick:()=>ef(s)})}),(0,a.jsx)(p.A,{title:"复制",children:(0,a.jsx)(f.Ay,{type:"text",icon:(0,a.jsx)(T.A,{}),onClick:()=>ew(s)})}),(0,a.jsx)(b.A,{title:"确认删除",description:"确定要删除这门课程吗？",onConfirm:()=>eb(s.id),okText:"确定",cancelText:"取消",children:(0,a.jsx)(p.A,{title:"删除",children:(0,a.jsx)(f.Ay,{type:"text",danger:!0,icon:(0,a.jsx)(M.A,{})})})})]})}],eT=(e,s,l)=>{if(!e||0===e.length)return null;let t=ec["".concat(s,"-").concat(l)]||!1,n=t?e:e.slice(0,3),r=e.length>3;return(0,a.jsxs)("div",{className:"schedule-courses",children:[n.map((e,s)=>(0,a.jsx)(p.A,{title:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:(0,a.jsx)("strong",{children:e.name})}),(0,a.jsxs)("div",{children:["教师：",e.teacher]}),(0,a.jsxs)("div",{children:["教室：",e.classroom]}),(0,a.jsxs)("div",{children:["报名：",e.enrolled,"/",e.capacity]}),(0,a.jsxs)("div",{children:["班主任：",e.classTeacher]}),(0,a.jsxs)("div",{children:["课次：",e.sessions,"次"]})]}),children:(0,a.jsx)(w.A,{size:"small",className:"course-card mb-1",style:{backgroundColor:e.enrolled>=e.capacity?"#fff2f0":"#f6ffed",borderColor:e.enrolled>=e.capacity?"#ffccc7":"#b7eb8f"},children:(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsx)("div",{className:"font-medium truncate",children:e.name}),(0,a.jsx)("div",{className:"text-gray-500",children:e.teacher}),(0,a.jsx)("div",{className:"text-gray-500",children:e.classroom}),(0,a.jsx)(k.A,{count:"".concat(e.enrolled,"/").concat(e.capacity),style:{backgroundColor:e.enrolled>=e.capacity?"#ff4d4f":"#52c41a",fontSize:"10px"}})]})})},e.id)),r&&(0,a.jsx)(f.Ay,{type:"link",size:"small",onClick:()=>ev(s,l),style:{padding:0,height:"auto",fontSize:"12px"},children:t?"收起":"展开查看全部".concat(e.length,"个课程")})]})},eM=[{title:"时间",dataIndex:"time",key:"time",width:120,fixed:"left"},...["周一","周二","周三","周四","周五","周六","周日"].map(e=>({title:e,dataIndex:e,key:e,render:(s,l)=>eT(s,l.time,e)}))];return(0,a.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-700",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(E,{level:2,className:"!m-0",children:"课程管理"}),(0,a.jsx)(D,{className:"text-gray-700",children:"管理所有课程信息，包括新增、编辑、删除等操作"}),(0,a.jsx)("div",{className:"w-20 h-1 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-full"})]}),(0,a.jsxs)(g.A,{children:[(0,a.jsx)(f.Ay,{icon:(0,a.jsx)(F.A,{}),onClick:()=>J(!0),children:"批量生成新学期"}),(0,a.jsx)(f.Ay,{icon:(0,a.jsx)(q.A,{}),children:"批量导入"}),(0,a.jsx)(f.Ay,{icon:(0,a.jsx)(z.A,{}),children:"导出数据"}),(0,a.jsx)(f.Ay,{type:"primary",icon:(0,a.jsx)(H.A,{}),onClick:()=>{eu.resetFields(),_(!0)},children:"新增课程"})]})]}),(0,a.jsxs)(i.A,{activeKey:ee,onChange:es,children:[(0,a.jsxs)(G,{tab:"课程列表",children:[(0,a.jsx)(w.A,{children:(0,a.jsx)(g.A,{direction:"vertical",style:{width:"100%"},children:(0,a.jsxs)(o.A,{gutter:16,children:[(0,a.jsx)(h.A,{span:6,children:(0,a.jsx)(m.A,{placeholder:"搜索课程名称、教师或类别",prefix:(0,a.jsx)(P.A,{}),allowClear:!0,value:x,onChange:e=>u(e.target.value)})}),(0,a.jsx)(h.A,{span:18,children:(0,a.jsxs)(g.A,{children:[(0,a.jsxs)(r.A,{defaultValue:"all",style:{width:120},children:[(0,a.jsx)(Y,{value:"all",children:"全部学期"}),(0,a.jsx)(Y,{value:"2024spring",children:"2024春季"}),(0,a.jsx)(Y,{value:"2023fall",children:"2023秋季"})]}),(0,a.jsxs)(r.A,{defaultValue:"all",style:{width:120},children:[(0,a.jsx)(Y,{value:"all",children:"全部类别"}),(0,a.jsx)(Y,{value:"sports",children:"体育健身"}),(0,a.jsx)(Y,{value:"arts",children:"文化艺术"}),(0,a.jsx)(Y,{value:"hobby",children:"兴趣爱好"})]}),(0,a.jsxs)(r.A,{defaultValue:"all",style:{width:120},children:[(0,a.jsx)(Y,{value:"all",children:"全部状态"}),(0,a.jsx)(Y,{value:"recruiting",children:"招生中"}),(0,a.jsx)(Y,{value:"full",children:"已满员"}),(0,a.jsx)(Y,{value:"ended",children:"已结束"})]})]})})]})})}),(0,a.jsx)(w.A,{children:(0,a.jsx)(N.A,{columns:eI,dataSource:ep,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:e=>"共 ".concat(e," 条记录")}})})]},"list"),(0,a.jsx)(G,{tab:"课表查看",children:(0,a.jsxs)(w.A,{children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)(g.A,{children:[(0,a.jsx)(R,{placeholder:["开始日期","结束日期"]}),(0,a.jsx)(f.Ay,{icon:(0,a.jsx)(L.A,{}),children:"刷新"}),(0,a.jsx)(f.Ay,{icon:(0,a.jsx)(O.A,{}),children:"导出课表"})]})}),(0,a.jsx)(N.A,{columns:eM,dataSource:(()=>{let e=["周一","周二","周三","周四","周五","周六","周日"];return["09:00-11:00","14:00-16:00","19:00-21:00"].map(s=>{let l={time:s};return e.forEach(e=>{let a=ep.filter(l=>l.weekday===e&&l.timeSlot===s);l[e]=a.length>0?a:null}),l})})(),rowKey:"time",pagination:!1,scroll:{x:1200},bordered:!0})]})},"schedule")]}),(0,a.jsx)(A.A,{title:"新增课程",open:V,onOk:()=>{eu.validateFields().then(e=>{let s=e.timeSlot?"".concat(e.timeSlot[0].format("HH:mm"),"-").concat(e.timeSlot[1].format("HH:mm")):"",l={...e,timeSlot:s,id:Math.max(...n.map(e=>e.id))+1,enrolled:0,status:"招生中",students:[],seats:Q(e.capacity||30),createdAt:B()().format("YYYY-MM-DD HH:mm:ss")};c([...n,l]),_(!1),eu.resetFields(),j.Ay.success("课程添加成功")})},onCancel:()=>_(!1),width:800,children:(0,a.jsx)(W,{form:eu})}),(0,a.jsx)(C.A,{title:"编辑课程",open:el,onClose:()=>ea(!1),width:1e3,extra:(0,a.jsxs)(g.A,{children:[(0,a.jsx)(f.Ay,{onClick:()=>ea(!1),children:"取消"}),(0,a.jsx)(f.Ay,{type:"primary",onClick:()=>{eu.validateFields().then(e=>{let s=e.timeSlot?"".concat(e.timeSlot[0].format("HH:mm"),"-").concat(e.timeSlot[1].format("HH:mm")):X.timeSlot;c(n.map(l=>l.id===X.id?{...l,...e,timeSlot:s,seats:l.seats.length!==e.capacity?Q(e.capacity):l.seats}:l)),ea(!1),eu.resetFields(),j.Ay.success("课程更新成功")})},children:"保存"})]}),children:(0,a.jsxs)(i.A,{activeKey:et,onChange:en,children:[(0,a.jsx)(G,{tab:"基本信息",children:(0,a.jsx)(W,{form:eu})},"basic"),(0,a.jsx)(G,{tab:"学员管理",children:X&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,a.jsx)("div",{children:(0,a.jsxs)(K,{strong:!0,children:["已报名学员：",(null===(e=X.students)||void 0===e?void 0:e.length)||0,"/",X.capacity]})}),(0,a.jsxs)(g.A,{children:[(0,a.jsx)(f.Ay,{icon:(0,a.jsx)(H.A,{}),children:"添加学员"}),(0,a.jsx)(f.Ay,{icon:(0,a.jsx)(q.A,{}),children:"批量导入"}),(0,a.jsx)(f.Ay,{icon:(0,a.jsx)(z.A,{}),children:"导出名单"})]})]}),(0,a.jsx)(N.A,{dataSource:X.students||[],rowKey:"id",pagination:{pageSize:10},columns:[{title:"姓名",dataIndex:"name",key:"name"},{title:"联系电话",dataIndex:"phone",key:"phone"},{title:"座位号",dataIndex:"seatNumber",key:"seatNumber",render:e=>e?(0,a.jsx)(y.A,{color:"blue",children:e}):"-"},{title:"报名时间",dataIndex:"enrollTime",key:"enrollTime",render:()=>"2024-01-15"},{title:"操作",key:"action",render:(e,s)=>(0,a.jsxs)(g.A,{children:[(0,a.jsx)(f.Ay,{type:"text",size:"small",children:"编辑"}),(0,a.jsx)(f.Ay,{type:"text",size:"small",danger:!0,children:"移除"})]})}]})]})},"students"),(0,a.jsx)(G,{tab:"座位管理",children:X&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)(o.A,{gutter:16,children:[(0,a.jsx)(h.A,{span:8,children:(0,a.jsx)(w.A,{size:"small",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded mr-2",style:{backgroundColor:eS("available")}}),(0,a.jsx)(K,{children:"可用座位"}),(0,a.jsx)(k.A,{count:(null===(s=X.seats)||void 0===s?void 0:s.filter(e=>"available"===e.status).length)||0,className:"ml-2"})]})})}),(0,a.jsx)(h.A,{span:8,children:(0,a.jsx)(w.A,{size:"small",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded mr-2",style:{backgroundColor:eS("locked")}}),(0,a.jsx)(K,{children:"已锁定"}),(0,a.jsx)(k.A,{count:(null===(l=X.seats)||void 0===l?void 0:l.filter(e=>"locked"===e.status).length)||0,className:"ml-2"})]})})}),(0,a.jsx)(h.A,{span:8,children:(0,a.jsxs)(g.A,{children:[(0,a.jsx)(f.Ay,{size:"small",onClick:()=>{if(!X)return;let e=X.seats.map(e=>({...e,status:"available",studentId:null,studentName:null})),s={...X,seats:e};Z(s),c(n.map(e=>e.id===X.id?s:e)),j.Ay.success("所有座位已解锁")},children:"全部解锁"}),(0,a.jsx)(f.Ay,{size:"small",onClick:()=>{X&&A.A.confirm({title:"确认重置座位",content:"重置后所有座位将变为可用状态，学员座位分配将被清除，确定要继续吗？",onOk(){let e=Q(X.capacity),s={...X,seats:e};Z(s),c(n.map(e=>e.id===X.id?s:e)),j.Ay.success("座位已重置")}})},children:"重置座位"})]})})]})}),(0,a.jsx)(w.A,{children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"bg-gray-200 p-3 mb-6 rounded",children:(0,a.jsx)(K,{strong:!0,children:"讲台"})}),(0,a.jsx)("div",{className:"seat-container",children:(e=>{if(!e||0===e.length)return null;let s=e.reduce((e,s)=>(e[s.row]||(e[s.row]=[]),e[s.row].push(s),e),{}),l=Object.keys(s).map(Number).sort((e,s)=>e-s);return(0,a.jsx)("div",{className:"seat-layout",children:l.map(e=>{let l=s[e].sort((e,s)=>e.col-s.col),t=Math.max(...Object.values(s).map(e=>e.length)),n=l.length,r=Math.floor((t-n)/2);return(0,a.jsxs)("div",{className:"seat-row flex justify-center items-center mb-2",children:[Array.from({length:r},(e,s)=>(0,a.jsx)("div",{className:"w-12 h-12 mx-1"},"left-".concat(s))),l.map(e=>(0,a.jsx)(p.A,{title:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:["座位：",e.id]}),e.studentName&&(0,a.jsxs)("div",{children:["学员：",e.studentName]}),(0,a.jsxs)("div",{children:["状态：","available"===e.status?"可用":"已锁定"]})]}),children:(0,a.jsxs)("div",{className:"seat-item w-12 h-12 rounded cursor-pointer flex flex-col items-center justify-center text-white font-semibold hover:scale-110 transition-transform mx-1 relative",style:{backgroundColor:eS(e.status)},onClick:()=>ek(e.id),children:[(0,a.jsx)("div",{className:"text-xs leading-none",children:e.id}),e.studentName&&(0,a.jsx)("div",{className:"text-xs leading-none mt-1 truncate w-full text-center",children:e.studentName})]})},e.id)),Array.from({length:t-n-r},(e,s)=>(0,a.jsx)("div",{className:"w-12 h-12 mx-1"},"right-".concat(s)))]},e)})})})(X.seats)})]})})]})},"seats")]})}),(0,a.jsx)(A.A,{title:"批量生成新学期课程",open:$,onOk:()=>{ej.validateFields().then(e=>{let{sourceSemester:s,targetSemester:l,selectedCourseIds:a,copyStudents:t}=e,r=n.filter(e=>e.semester===s&&a.includes(e.id)).map(e=>({...e,id:Math.max(...n.map(e=>e.id))+1e3*Math.random(),semester:l,enrolled:t?e.enrolled:0,status:"招生中",students:t?[...e.students]:[],seats:t?e.seats.map(e=>({...e})):Q(e.capacity)}));c([...n,...r]),J(!1),ej.resetFields(),j.Ay.success("成功生成 ".concat(r.length," 门新学期课程"))})},onCancel:()=>{J(!1),ei(""),ej.resetFields()},width:700,children:(0,a.jsxs)(d.A,{form:ej,layout:"vertical",children:[(0,a.jsxs)(o.A,{gutter:16,children:[(0,a.jsx)(h.A,{span:12,children:(0,a.jsx)(d.A.Item,{name:"sourceSemester",label:"源学期",rules:[{required:!0,message:"请选择源学期"}],children:(0,a.jsxs)(r.A,{placeholder:"请选择要复制的学期",onChange:e=>{ei(e),ej.setFieldsValue({selectedCourseIds:[]})},children:[(0,a.jsx)(Y,{value:"2024春季",children:"2024春季"}),(0,a.jsx)(Y,{value:"2023秋季",children:"2023秋季"})]})})}),(0,a.jsx)(h.A,{span:12,children:(0,a.jsx)(d.A.Item,{name:"targetSemester",label:"目标学期",rules:[{required:!0,message:"请选择目标学期"}],children:(0,a.jsxs)(r.A,{placeholder:"请选择新学期",children:[(0,a.jsx)(Y,{value:"2024秋季",children:"2024秋季"}),(0,a.jsx)(Y,{value:"2025春季",children:"2025春季"})]})})})]}),er&&(0,a.jsx)(d.A.Item,{name:"selectedCourseIds",label:"选择要复制的课程 (".concat(er,"共").concat(eg().length,"门课程)"),rules:[{required:!0,message:"请选择要复制的课程"}],children:(0,a.jsx)(S.A.Group,{style:{width:"100%"},children:(0,a.jsx)(o.A,{children:eg().map(e=>(0,a.jsx)(h.A,{span:24,className:"mb-2",children:(0,a.jsx)(S.A,{value:e.id,children:(0,a.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,a.jsx)("span",{className:"font-medium",children:e.name}),(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{color:"blue",children:e.category}),(0,a.jsx)(K,{type:"secondary",children:e.teacher}),(0,a.jsxs)(K,{type:"secondary",children:[e.weekday," ",e.timeSlot]}),(0,a.jsx)(K,{type:"secondary",children:e.classroom}),(0,a.jsxs)(K,{type:"secondary",children:[e.sessions,"次"]}),(0,a.jsx)(k.A,{count:"".concat(e.enrolled,"/").concat(e.capacity),style:{backgroundColor:e.enrolled>=e.capacity?"#ff4d4f":"#52c41a"}})]})]})})},e.id))})})}),(0,a.jsx)(d.A.Item,{name:"copyStudents",valuePropName:"checked",label:"复制选项",children:(0,a.jsx)(S.A,{children:"同时复制学员信息和座位安排（用于老生优先报名）"})}),(0,a.jsx)("div",{className:"bg-blue-50 p-4 rounded",children:(0,a.jsxs)(K,{type:"secondary",children:[(0,a.jsx)("strong",{children:"说明："}),(0,a.jsx)("br",{}),"• 新生成的课程将保持原有的课程设置（教师、时间、教室等）",(0,a.jsx)("br",{}),"• 如果选择复制学员信息，新课程将包含原课程的学员名单和座位安排",(0,a.jsx)("br",{}),"• 复制的学员信息可用于新学期的老生优先报名功能",(0,a.jsx)("br",{}),"• 课次数、学费等信息也会一并复制"]})})]})}),(0,a.jsx)(A.A,{title:"为座位 ".concat(em," 选择学员"),open:eo,onOk:()=>{eA.validateFields().then(e=>{let{studentId:s}=e,l=ey.find(e=>e.id===s);if(!X||!em||!l)return;let a=X.seats.map(e=>e.id===em?{...e,status:"locked",studentId:l.id,studentName:l.name}:e),t={...X,seats:a};Z(t),c(n.map(e=>e.id===X.id?t:e)),eh(!1),ex(""),eA.resetFields(),j.Ay.success("已将".concat(l.name,"分配到座位").concat(em))})},onCancel:()=>{eh(!1),ex(""),eA.resetFields()},width:500,children:(0,a.jsxs)(d.A,{form:eA,layout:"vertical",children:[(0,a.jsx)(d.A.Item,{name:"studentId",label:"选择学员",rules:[{required:!0,message:"请选择学员"}],children:(0,a.jsx)(r.A,{placeholder:"请选择学员",onChange:e=>{let s=ey.find(s=>s.id===e);s&&eA.setFieldsValue({studentId:s.id,studentName:s.name})},showSearch:!0,filterOption:(e,s)=>{var l;return null==s?void 0:null===(l=s.children)||void 0===l?void 0:l.toLowerCase().includes(e.toLowerCase())},children:ey.map(e=>(0,a.jsx)(Y,{value:e.id,children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:e.name}),(0,a.jsxs)(g.A,{children:[(0,a.jsxs)(K,{type:"secondary",children:[e.age,"岁"]}),(0,a.jsx)(K,{type:"secondary",children:e.phone})]})]})},e.id))})}),eA.getFieldValue("studentId")&&(0,a.jsx)("div",{className:"bg-blue-50 p-3 rounded mb-4",children:(0,a.jsxs)(K,{type:"secondary",children:[(0,a.jsx)("strong",{children:"学员信息："}),(()=>{let e=ey.find(e=>e.id===eA.getFieldValue("studentId"));return e?(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{children:["姓名：",e.name]}),(0,a.jsxs)("div",{children:["年龄：",e.age,"岁"]}),(0,a.jsxs)("div",{children:["电话：",e.phone]})]}):null})()]})})]})})]})}if("undefined"!=typeof document){let e=document.createElement("style");e.textContent="\n  .course-card {\n    border: 1px solid #d9d9d9;\n    border-radius: 6px;\n    padding: 8px;\n    margin: 2px;\n    background: #fafafa;\n    transition: all 0.3s;\n  }\n  \n  .course-card:hover {\n    border-color: #1890ff;\n    box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n  }\n  \n  .ant-table-tbody > tr > td {\n    padding: 8px 16px;\n  }\n  \n  .seat-container {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    max-width: 600px;\n    margin: 0 auto;\n  }\n  \n  .seat-layout {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 8px;\n    width: 100%;\n  }\n  \n  .seat-row {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 4px;\n  }\n  \n  .seat-item {\n    width: 48px;\n    height: 48px;\n    border-radius: 6px;\n    cursor: pointer;\n    transition: transform 0.3s;\n    border: 2px solid rgba(255,255,255,0.3);\n    font-size: 10px;\n    line-height: 1;\n  }\n  \n  .seat-item:hover {\n    transform: scale(1.1);\n    box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n  }\n",document.head.appendChild(e)}},45866:(e,s,l)=>{Promise.resolve().then(l.bind(l,12592))}},e=>{var s=s=>e(e.s=s);e.O(0,[2239,6034,4405,7641,6467,7062,7845,4069,6002,4670,7238,1175,85,9868,1218,3863,8441,1684,7358],()=>s(45866)),_N_E=e.O()}]);