(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5631],{19268:(e,s,l)=>{Promise.resolve().then(l.bind(l,63538))},63538:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>V});var r=l(95155),i=l(12115),n=l(97605),t=l(20778),c=l(35125),a=l(44670),d=l(37974),o=l(12320),x=l(28562),h=l(26922),j=l(30662),u=l(27212),A=l(19361),y=l(74947),m=l(6124),p=l(56020),v=l(18866),g=l(46002),f=l(94600),b=l(85),C=l(12088),w=l(52092),k=l(79659),N=l(92611),F=l(56170),I=l(46996),z=l(96097),S=l(93356),M=l(61398),q=l(88870),B=l(90765);let{Title:L,Text:_,Paragraph:W}=n.A,{Option:T}=t.A,{TabPane:E}=c.A,O=[{id:1,name:"A101",building:"A栋",floor:1,capacity:30,area:60,type:"普通教室",facilities:["投影仪","音响","空调","WiFi"],status:"可用",currentCourse:null,layout:"8行x6列",rows:5,cols:6,seats:Array.from({length:30},(e,s)=>({id:s+1,row:Math.floor(s/6)+1,col:s%6+1,status:"可用"}))},{id:2,name:"B203",building:"B栋",floor:2,capacity:25,area:50,type:"舞蹈室",facilities:["音响","空调","WiFi","镜子","把杆"],status:"使用中",currentCourse:"舞蹈基础班",layout:"6行x6列",rows:5,cols:5,seats:Array.from({length:25},(e,s)=>({id:s+1,row:Math.floor(s/5)+1,col:s%5+1,status:s<20?"占用":"可用"}))},{id:3,name:"C105",building:"C栋",floor:1,capacity:20,area:40,type:"美术室",facilities:["投影仪","音响","空调","WiFi","画架","水槽"],status:"维修中",currentCourse:null,layout:"9行x5列",rows:4,cols:5,seats:Array.from({length:20},(e,s)=>({id:s+1,row:Math.floor(s/5)+1,col:s%5+1,status:s<5?"维修":"可用"}))}];function V(){let[e,s]=(0,i.useState)(O),[l,n]=(0,i.useState)(""),[V,D]=(0,i.useState)(null),[K,P]=(0,i.useState)(!1),[Z,G]=(0,i.useState)(!1),[H,J]=(0,i.useState)(!1),[Q,R]=(0,i.useState)(!1),[U]=a.A.useForm(),[X,Y]=(0,i.useState)("list"),$=e.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())||e.building.toLowerCase().includes(l.toLowerCase())||e.type.toLowerCase().includes(l.toLowerCase())),ee=e=>{D(e),P(!0)},es=e=>{D(e),U.setFieldsValue(e),G(!0)},el=e=>{D(e),R(!0)},er=l=>{s(e.filter(e=>e.id!==l))},ei=e=>{switch(e){case"可用":return(0,r.jsx)(d.A,{color:"success",children:"可用"});case"使用中":return(0,r.jsx)(d.A,{color:"processing",children:"使用中"});case"维修中":return(0,r.jsx)(d.A,{color:"error",children:"维修中"});default:return(0,r.jsx)(d.A,{children:e})}},en=e=>{switch(e){case"普通教室":return"#1890ff";case"舞蹈室":return"#722ed1";case"美术室":return"#52c41a";case"音乐室":return"#fa8c16";case"计算机室":return"#13c2c2";case"会议室":return"#eb2f96";default:return"#8c8c8c"}},et=e=>"#52c41a",ec=l=>{if(!V)return;let r=[...V.seats],i=r.findIndex(e=>e.id===l),n=V.cols||6;if(-1!==i)r.splice(i,1);else{let e=Math.floor((l-1)/n)+1;r.push({id:l,row:e,col:(l-1)%n+1,status:"可用"})}let t={...V,seats:r};D(t),s(e.map(e=>e.id===V.id?t:e))},ea=e=>(null==V?void 0:V.seats.some(s=>s.id===e))||!1,ed=[{title:"教室信息",key:"info",render:(e,s)=>(0,r.jsxs)(o.A,{children:[(0,r.jsx)(x.A,{style:{backgroundColor:en(s.type)},icon:(0,r.jsx)(C.A,{})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(_,{strong:!0,children:s.name}),(0,r.jsx)("br",{}),(0,r.jsx)(_,{type:"secondary",children:s.layout})]})]})},{title:"位置",key:"location",render:(e,s)=>(0,r.jsxs)(o.A,{direction:"vertical",size:0,children:[(0,r.jsx)(_,{children:s.building}),(0,r.jsxs)(_,{type:"secondary",children:[s.floor,"楼"]})]})},{title:"容量/面积",key:"capacity",render:(e,s)=>(0,r.jsxs)(o.A,{direction:"vertical",size:0,children:[(0,r.jsxs)(_,{children:[s.capacity,"人"]}),(0,r.jsxs)(_,{type:"secondary",children:[s.area,"㎡"]})]})},{title:"类型",dataIndex:"type",key:"type",filters:[{text:"普通教室",value:"普通教室"},{text:"舞蹈室",value:"舞蹈室"},{text:"美术室",value:"美术室"},{text:"音乐室",value:"音乐室"},{text:"计算机室",value:"计算机室"},{text:"会议室",value:"会议室"}],onFilter:(e,s)=>s.type===e,render:e=>(0,r.jsx)(d.A,{color:en(e),children:e})},{title:"设施",dataIndex:"facilities",key:"facilities",render:e=>(0,r.jsxs)(o.A,{size:[0,4],wrap:!0,children:[e.slice(0,3).map((e,s)=>(0,r.jsx)(d.A,{children:e},s)),e.length>3&&(0,r.jsxs)(d.A,{children:["+",e.length-3]})]})},{title:"状态",dataIndex:"status",key:"status",filters:[{text:"可用",value:"可用"},{text:"使用中",value:"使用中"},{text:"维修中",value:"维修中"}],onFilter:(e,s)=>s.status===e,render:e=>ei(e)},{title:"当前课程",dataIndex:"currentCourse",key:"currentCourse",render:e=>e||"-"},{title:"操作",key:"action",render:(e,s)=>(0,r.jsxs)(o.A,{size:"small",children:[(0,r.jsx)(h.A,{title:"查看详情",children:(0,r.jsx)(j.Ay,{type:"text",icon:(0,r.jsx)(w.A,{}),onClick:()=>ee(s)})}),(0,r.jsx)(h.A,{title:"编辑",children:(0,r.jsx)(j.Ay,{type:"text",icon:(0,r.jsx)(k.A,{}),onClick:()=>es(s)})}),(0,r.jsx)(h.A,{title:"座位管理",children:(0,r.jsx)(j.Ay,{type:"text",icon:(0,r.jsx)(N.A,{}),onClick:()=>el(s)})}),(0,r.jsx)(u.A,{title:"删除教室",description:"确定要删除这个教室吗？",onConfirm:()=>er(s.id),okText:"确定",cancelText:"取消",children:(0,r.jsx)(h.A,{title:"删除",children:(0,r.jsx)(j.Ay,{type:"text",danger:!0,icon:(0,r.jsx)(F.A,{})})})})]})}];return(0,r.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-700",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(L,{level:2,className:"!m-0 gradient-text",children:"教室管理"}),(0,r.jsx)(W,{className:"text-gray-600",children:"管理教室信息，包括座位布局、设施配置等"}),(0,r.jsx)("div",{className:"w-20 h-1 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full"})]}),(0,r.jsx)(j.Ay,{type:"primary",icon:(0,r.jsx)(I.A,{}),onClick:()=>{U.resetFields(),J(!0)},children:"新增教室"})]}),(0,r.jsxs)(A.A,{gutter:[16,16],children:[(0,r.jsx)(y.A,{xs:24,sm:12,lg:6,children:(0,r.jsx)(m.A,{hoverable:!0,children:(0,r.jsxs)(o.A,{children:[(0,r.jsx)(x.A,{size:48,style:{backgroundColor:"#6366f1"},icon:(0,r.jsx)(C.A,{})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(_,{type:"secondary",children:"总教室数"}),(0,r.jsx)(L,{level:3,className:"!m-0",children:e.length})]})]})})}),(0,r.jsx)(y.A,{xs:24,sm:12,lg:6,children:(0,r.jsx)(m.A,{hoverable:!0,children:(0,r.jsxs)(o.A,{children:[(0,r.jsx)(x.A,{size:48,style:{backgroundColor:"#10b981"},icon:(0,r.jsx)(z.A,{})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(_,{type:"secondary",children:"可用教室"}),(0,r.jsx)(L,{level:3,className:"!m-0",children:e.filter(e=>"可用"===e.status).length})]})]})})}),(0,r.jsx)(y.A,{xs:24,sm:12,lg:6,children:(0,r.jsx)(m.A,{hoverable:!0,children:(0,r.jsxs)(o.A,{children:[(0,r.jsx)(x.A,{size:48,style:{backgroundColor:"#3b82f6"},icon:(0,r.jsx)(S.A,{})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(_,{type:"secondary",children:"使用中"}),(0,r.jsx)(L,{level:3,className:"!m-0",children:e.filter(e=>"使用中"===e.status).length})]})]})})}),(0,r.jsx)(y.A,{xs:24,sm:12,lg:6,children:(0,r.jsx)(m.A,{hoverable:!0,children:(0,r.jsxs)(o.A,{children:[(0,r.jsx)(x.A,{size:48,style:{backgroundColor:"#f97316"},icon:(0,r.jsx)(M.A,{})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(_,{type:"secondary",children:"总座位数"}),(0,r.jsx)(L,{level:3,className:"!m-0",children:e.reduce((e,s)=>e+s.capacity,0)})]})]})})})]}),(0,r.jsx)(c.A,{activeKey:X,onChange:Y,children:(0,r.jsxs)(E,{tab:"教室列表",children:[(0,r.jsx)(m.A,{className:"mb-6",children:(0,r.jsxs)(A.A,{gutter:16,children:[(0,r.jsx)(y.A,{span:8,children:(0,r.jsx)(p.A,{placeholder:"搜索教室名称、楼栋或类型",prefix:(0,r.jsx)(q.A,{}),allowClear:!0,value:l,onChange:e=>n(e.target.value)})}),(0,r.jsx)(y.A,{span:4,children:(0,r.jsxs)(t.A,{defaultValue:"all",style:{width:"100%"},children:[(0,r.jsx)(T,{value:"all",children:"全部楼栋"}),(0,r.jsx)(T,{value:"A",children:"A栋"}),(0,r.jsx)(T,{value:"B",children:"B栋"}),(0,r.jsx)(T,{value:"C",children:"C栋"})]})}),(0,r.jsx)(y.A,{span:4,children:(0,r.jsxs)(t.A,{defaultValue:"all",style:{width:"100%"},children:[(0,r.jsx)(T,{value:"all",children:"全部状态"}),(0,r.jsx)(T,{value:"available",children:"可用"}),(0,r.jsx)(T,{value:"occupied",children:"使用中"}),(0,r.jsx)(T,{value:"maintenance",children:"维修中"})]})})]})}),(0,r.jsx)(m.A,{children:(0,r.jsx)(v.A,{columns:ed,dataSource:$,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:e=>"共 ".concat(e," 条记录")}})})]},"list")}),(0,r.jsx)(g.A,{title:V?"编辑教室":"新增教室",open:H||Z,onOk:V?()=>{U.validateFields().then(l=>{s(e.map(e=>e.id===V.id?{...e,...l}:e)),G(!1),U.resetFields()})}:()=>{U.validateFields().then(l=>{let r=l.rows||5,i=l.cols||6,n=r*i,t={...l,id:Math.max(...e.map(e=>e.id))+1,status:"可用",currentCourse:null,capacity:n,rows:r,cols:i,seats:Array.from({length:n},(e,s)=>({id:s+1,row:Math.floor(s/i)+1,col:s%i+1,status:"可用"}))};s([...e,t]),J(!1),U.resetFields()})},onCancel:()=>{J(!1),G(!1),U.resetFields()},width:700,children:(0,r.jsxs)(a.A,{form:U,layout:"vertical",children:[(0,r.jsxs)(A.A,{gutter:16,children:[(0,r.jsx)(y.A,{span:12,children:(0,r.jsx)(a.A.Item,{name:"name",label:"教室名称",rules:[{required:!0,message:"请输入教室名称"}],children:(0,r.jsx)(p.A,{placeholder:"如：A101"})})}),(0,r.jsx)(y.A,{span:12,children:(0,r.jsx)(a.A.Item,{name:"building",label:"所属楼栋",rules:[{required:!0,message:"请选择楼栋"}],children:(0,r.jsxs)(t.A,{placeholder:"选择楼栋",children:[(0,r.jsx)(T,{value:"A栋",children:"A栋"}),(0,r.jsx)(T,{value:"B栋",children:"B栋"}),(0,r.jsx)(T,{value:"C栋",children:"C栋"}),(0,r.jsx)(T,{value:"D栋",children:"D栋"})]})})})]}),(0,r.jsxs)(A.A,{gutter:16,children:[(0,r.jsx)(y.A,{span:8,children:(0,r.jsx)(a.A.Item,{name:"floor",label:"楼层",rules:[{required:!0,message:"请输入楼层"}],children:(0,r.jsx)(p.A,{type:"number",placeholder:"1"})})}),(0,r.jsx)(y.A,{span:8,children:(0,r.jsx)(a.A.Item,{name:"rows",label:"座位行数",rules:[{required:!0,message:"请输入座位行数"}],children:(0,r.jsx)(p.A,{type:"number",placeholder:"5"})})}),(0,r.jsx)(y.A,{span:8,children:(0,r.jsx)(a.A.Item,{name:"cols",label:"座位列数",rules:[{required:!0,message:"请输入座位列数"}],children:(0,r.jsx)(p.A,{type:"number",placeholder:"6"})})})]}),(0,r.jsxs)(A.A,{gutter:16,children:[(0,r.jsx)(y.A,{span:8,children:(0,r.jsx)(a.A.Item,{name:"area",label:"面积(㎡)",children:(0,r.jsx)(p.A,{type:"number",placeholder:"60"})})}),(0,r.jsx)(y.A,{span:16,children:(0,r.jsx)(a.A.Item,{name:"type",label:"教室类型",rules:[{required:!0,message:"请选择教室类型"}],children:(0,r.jsxs)(t.A,{placeholder:"选择类型",children:[(0,r.jsx)(T,{value:"普通教室",children:"普通教室"}),(0,r.jsx)(T,{value:"舞蹈室",children:"舞蹈室"}),(0,r.jsx)(T,{value:"美术室",children:"美术室"}),(0,r.jsx)(T,{value:"音乐室",children:"音乐室"}),(0,r.jsx)(T,{value:"计算机室",children:"计算机室"}),(0,r.jsx)(T,{value:"会议室",children:"会议室"})]})})})]}),(0,r.jsx)(a.A.Item,{name:"facilities",label:"设施配置",children:(0,r.jsxs)(t.A,{mode:"multiple",placeholder:"选择设施",children:[(0,r.jsx)(T,{value:"投影仪",children:"投影仪"}),(0,r.jsx)(T,{value:"音响",children:"音响"}),(0,r.jsx)(T,{value:"空调",children:"空调"}),(0,r.jsx)(T,{value:"WiFi",children:"WiFi"}),(0,r.jsx)(T,{value:"电子白板",children:"电子白板"}),(0,r.jsx)(T,{value:"镜子",children:"镜子"}),(0,r.jsx)(T,{value:"把杆",children:"把杆"}),(0,r.jsx)(T,{value:"画架",children:"画架"}),(0,r.jsx)(T,{value:"水槽",children:"水槽"}),(0,r.jsx)(T,{value:"钢琴",children:"钢琴"}),(0,r.jsx)(T,{value:"电脑",children:"电脑"}),(0,r.jsx)(T,{value:"实训设备",children:"实训设备"})]})})]})}),(0,r.jsx)(g.A,{title:"教室详情",open:K,onCancel:()=>P(!1),footer:[(0,r.jsx)(j.Ay,{onClick:()=>P(!1),children:"关闭"},"close")],width:700,children:V&&(0,r.jsxs)("div",{children:[(0,r.jsxs)(A.A,{gutter:[16,16],children:[(0,r.jsx)(y.A,{span:12,children:(0,r.jsx)(m.A,{children:(0,r.jsxs)(o.A,{direction:"vertical",style:{width:"100%"},children:[(0,r.jsx)(_,{type:"secondary",children:"基本信息"}),(0,r.jsx)(f.A,{style:{margin:"8px 0"}}),(0,r.jsxs)(o.A,{children:[(0,r.jsx)(_,{strong:!0,children:"教室名称:"}),(0,r.jsx)(_,{children:V.name})]}),(0,r.jsxs)(o.A,{children:[(0,r.jsx)(_,{strong:!0,children:"所在位置:"}),(0,r.jsxs)(_,{children:[V.building," ",V.floor,"楼"]})]}),(0,r.jsxs)(o.A,{children:[(0,r.jsx)(_,{strong:!0,children:"教室类型:"}),(0,r.jsx)(d.A,{color:en(V.type),children:V.type})]})]})})}),(0,r.jsx)(y.A,{span:12,children:(0,r.jsx)(m.A,{children:(0,r.jsxs)(o.A,{direction:"vertical",style:{width:"100%"},children:[(0,r.jsx)(_,{type:"secondary",children:"使用情况"}),(0,r.jsx)(f.A,{style:{margin:"8px 0"}}),(0,r.jsxs)(o.A,{children:[(0,r.jsx)(_,{strong:!0,children:"当前状态:"}),ei(V.status)]}),(0,r.jsxs)(o.A,{children:[(0,r.jsx)(_,{strong:!0,children:"座位配置:"}),(0,r.jsxs)(_,{children:[V.rows||5,"行 \xd7 ",V.cols||6,"列 (",V.capacity,"人)"]})]}),(0,r.jsxs)(o.A,{children:[(0,r.jsx)(_,{strong:!0,children:"教室面积:"}),(0,r.jsxs)(_,{children:[V.area,"㎡"]})]}),(0,r.jsxs)(o.A,{children:[(0,r.jsx)(_,{strong:!0,children:"当前课程:"}),(0,r.jsx)(_,{children:V.currentCourse||"无"})]})]})})})]}),(0,r.jsx)(m.A,{className:"mt-4",children:(0,r.jsxs)(o.A,{direction:"vertical",style:{width:"100%"},children:[(0,r.jsx)(_,{type:"secondary",children:"设施配置"}),(0,r.jsx)(f.A,{style:{margin:"8px 0"}}),(0,r.jsx)(o.A,{size:[8,8],wrap:!0,children:V.facilities.map((e,s)=>(0,r.jsx)(d.A,{icon:(0,r.jsx)(B.A,{}),color:"blue",children:e},s))})]})})]})}),(0,r.jsx)(g.A,{title:"座位管理 - ".concat(null==V?void 0:V.name),open:Q,onCancel:()=>R(!1),footer:[(0,r.jsx)(j.Ay,{onClick:()=>R(!1),children:"关闭"},"close")],width:800,children:V&&(0,r.jsxs)("div",{children:[(0,r.jsx)(A.A,{gutter:16,className:"mb-4",children:(0,r.jsx)(y.A,{span:24,children:(0,r.jsx)(m.A,{children:(0,r.jsxs)(o.A,{children:[(0,r.jsx)("div",{className:"w-6 h-6 rounded",style:{backgroundColor:et("可用")}}),(0,r.jsx)(_,{children:"座位 (点击空白位置添加座位，点击已有座位删除)"}),(0,r.jsx)(b.A,{count:V.seats.length,showZero:!0,style:{backgroundColor:"#52c41a"}})]})})})}),(0,r.jsx)(m.A,{children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"bg-gray-200 p-2 mb-6 rounded",children:(0,r.jsx)(_,{strong:!0,children:"讲台"})}),(0,r.jsx)("div",{className:"gap-2 max-w-2xl mx-auto",style:{display:"grid",gridTemplateColumns:"repeat(".concat(V.cols||6,", 1fr)")},children:Array.from({length:(V.rows||5)*(V.cols||6)},(e,s)=>{let l=s+1,i=V.cols||6,n=Math.floor(s/i)+1,t=s%i+1,c=ea(l);return(0,r.jsx)(h.A,{title:c?"座位 ".concat(n,"-").concat(t," (点击删除)"):"位置 ".concat(n,"-").concat(t," (点击添加座位)"),children:(0,r.jsx)("div",{className:"w-10 h-10 rounded cursor-pointer flex items-center justify-center text-white font-semibold hover:scale-110 transition-transform ".concat(c?"opacity-100":"opacity-30 border-2 border-dashed border-gray-400"),style:{backgroundColor:c?et("可用"):"#f0f0f0",color:c?"white":"#999"},onClick:()=>ec(l),children:c?"".concat(n,"-").concat(t):"+"})},l)})})]})})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[2239,6034,4405,7641,6467,7062,7845,4069,6002,4670,7238,85,3554,3391,8441,1684,7358],()=>s(19268)),_N_E=e.O()}]);