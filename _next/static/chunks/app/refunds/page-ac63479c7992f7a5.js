(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{3231:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(79630),r=a(12115);let l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"};var n=a(62764);let c=r.forwardRef(function(e,t){return r.createElement(n.A,(0,s.A)({},e,{ref:t,icon:l}))})},16913:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(79630),r=a(12115);let l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"};var n=a(62764);let c=r.forwardRef(function(e,t){return r.createElement(n.A,(0,s.A)({},e,{ref:t,icon:l}))})},18105:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>H});var s=a(95155),r=a(12115),l=a(97605),n=a(20778),c=a(35125),i=a(56020),d=a(44670),o=a(37974),u=a(12320),x=a(30662),h=a(19361),j=a(74947),m=a(6124),v=a(44297),A=a(18866),f=a(46002),p=a(89631),g=a(40344),y=a(52092),w=a(90765),b=a(31511),I=a(16913),z=a(3231),S=a(48312),C=a(88870),k=a(56203);let{Title:N,Text:R,Paragraph:M}=l.A,{Option:L}=n.A,{TabPane:D}=c.A,{TextArea:E}=i.A,B=[{id:1,studentId:"24100001",studentName:"刘伟明",course:"太极拳基础班",amount:200,reason:"身体原因无法继续上课",applyDate:"2024-01-25",status:"待初审",reviewer1:null,reviewer2:null,evidence:["医院证明.jpg"],rejectReason:null},{id:2,studentId:"24100002",studentName:"陈思怡",course:"摄影基础班",amount:250,reason:"搬家到外地",applyDate:"2024-01-20",status:"已确认",reviewer1:"管理员A",reviewer2:null,evidence:["搬家证明.jpg"],rejectReason:null},{id:3,studentId:"24100003",studentName:"张雨欣",course:"书法提高班",amount:300,reason:"课程时间冲突",applyDate:"2024-01-18",status:"已审批",reviewer1:"管理员A",reviewer2:"管理员B",evidence:["工作证明.jpg"],rejectReason:null}];function H(){let[e,t]=(0,r.useState)(B),[a,l]=(0,r.useState)(""),[n,L]=(0,r.useState)(null),[H,V]=(0,r.useState)(!1),[_,F]=(0,r.useState)(!1),[T,O]=(0,r.useState)("approve"),[q,K]=(0,r.useState)(""),[P,G]=(0,r.useState)("all"),[J]=d.A.useForm(),Q=e.filter(e=>{let t=e.studentName.toLowerCase().includes(a.toLowerCase())||e.studentId.includes(a)||e.course.toLowerCase().includes(a.toLowerCase());return"all"===P?t:t&&e.status===P}),U=e=>{L(e),V(!0)},W=(e,t)=>{L(e),O(t),F(!0)},X=e=>{switch(e){case"待初审":return(0,s.jsx)(o.A,{color:"warning",children:"待初审"});case"已确认":return(0,s.jsx)(o.A,{color:"processing",children:"已确认"});case"已审批":return(0,s.jsx)(o.A,{color:"success",children:"已审批"});case"已拒绝":return(0,s.jsx)(o.A,{color:"error",children:"已拒绝"});default:return(0,s.jsx)(o.A,{children:e})}},Y=e=>"待初审"===e.status||"已确认"===e.status,Z=[{title:"申请编号",dataIndex:"id",key:"id",render:e=>"RF".concat(e.toString().padStart(4,"0"))},{title:"学员",key:"student",render:(e,t)=>(0,s.jsxs)(u.A,{direction:"vertical",size:0,children:[(0,s.jsx)(R,{strong:!0,children:t.studentName}),(0,s.jsx)(R,{type:"secondary",children:t.studentId})]})},{title:"课程",dataIndex:"course",key:"course"},{title:"申请金额",dataIndex:"amount",key:"amount",render:e=>"\xa5".concat(e),sorter:(e,t)=>e.amount-t.amount},{title:"申请时间",dataIndex:"applyDate",key:"applyDate",sorter:(e,t)=>new Date(e.applyDate).getTime()-new Date(t.applyDate).getTime()},{title:"状态",dataIndex:"status",key:"status",render:e=>X(e),filters:[{text:"待初审",value:"待初审"},{text:"已确认",value:"已确认"},{text:"已审批",value:"已审批"},{text:"已拒绝",value:"已拒绝"}],onFilter:(e,t)=>t.status===e},{title:"操作",key:"action",render:(e,t)=>(0,s.jsxs)(u.A,{size:"small",children:[(0,s.jsx)(x.Ay,{type:"text",icon:(0,s.jsx)(y.A,{}),onClick:()=>U(t)}),Y(t)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Ay,{type:"text",icon:(0,s.jsx)(w.A,{}),className:"text-success hover:text-success/80",onClick:()=>W(t,"approve")}),(0,s.jsx)(x.Ay,{type:"text",icon:(0,s.jsx)(b.A,{}),danger:!0,onClick:()=>W(t,"reject")})]})]})}];return(0,s.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-700",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(N,{level:2,className:"!m-0 gradient-text",children:"退费管理"}),(0,s.jsx)(M,{className:"text-gray-600",children:"处理学员退费申请，支持两级审核流程"}),(0,s.jsx)("div",{className:"w-20 h-1 bg-gradient-to-r from-orange-500 to-red-500 rounded-full"})]}),(0,s.jsx)(x.Ay,{icon:(0,s.jsx)(I.A,{}),children:"导出退费数据"})]}),(0,s.jsxs)(h.A,{gutter:[16,16],children:[(0,s.jsx)(j.A,{xs:24,sm:12,lg:6,children:(0,s.jsx)(m.A,{hoverable:!0,children:(0,s.jsx)(v.A,{title:"待初审",value:e.filter(e=>"待初审"===e.status).length,suffix:"需要初审的申请",valueStyle:{color:"#faad14"},prefix:(0,s.jsx)(z.A,{})})})}),(0,s.jsx)(j.A,{xs:24,sm:12,lg:6,children:(0,s.jsx)(m.A,{hoverable:!0,children:(0,s.jsx)(v.A,{title:"已确认",value:e.filter(e=>"已确认"===e.status).length,suffix:"等待二审的申请",valueStyle:{color:"#1890ff"},prefix:(0,s.jsx)(S.A,{})})})}),(0,s.jsx)(j.A,{xs:24,sm:12,lg:6,children:(0,s.jsx)(m.A,{hoverable:!0,children:(0,s.jsx)(v.A,{title:"已审批",value:e.filter(e=>"已审批"===e.status).length,suffix:"已完成退费",valueStyle:{color:"#52c41a"},prefix:(0,s.jsx)(w.A,{})})})}),(0,s.jsx)(j.A,{xs:24,sm:12,lg:6,children:(0,s.jsx)(m.A,{hoverable:!0,children:(0,s.jsx)(v.A,{title:"已拒绝",value:e.filter(e=>"已拒绝"===e.status).length,suffix:"被拒绝的申请",valueStyle:{color:"#ff4d4f"},prefix:(0,s.jsx)(b.A,{})})})})]}),(0,s.jsxs)(m.A,{children:[(0,s.jsxs)(c.A,{activeKey:P,onChange:G,tabBarExtraContent:(0,s.jsx)(i.A,{placeholder:"搜索学员姓名、学号或课程",prefix:(0,s.jsx)(C.A,{}),style:{width:250},allowClear:!0,value:a,onChange:e=>l(e.target.value)}),children:[(0,s.jsx)(D,{tab:"全部申请 (".concat(e.length,")")},"all"),(0,s.jsx)(D,{tab:"待初审 (".concat(e.filter(e=>"待初审"===e.status).length,")")},"待初审"),(0,s.jsx)(D,{tab:"已确认 (".concat(e.filter(e=>"已确认"===e.status).length,")")},"已确认"),(0,s.jsx)(D,{tab:"已审批 (".concat(e.filter(e=>"已审批"===e.status).length,")")},"已审批"),(0,s.jsx)(D,{tab:"已拒绝 (".concat(e.filter(e=>"已拒绝"===e.status).length,")")},"已拒绝")]}),(0,s.jsx)(A.A,{columns:Z,dataSource:Q,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:e=>"共 ".concat(e," 条记录")}})]}),(0,s.jsx)(f.A,{title:"退费申请详情",open:H,onCancel:()=>V(!1),footer:[(0,s.jsx)(x.Ay,{onClick:()=>V(!1),children:"关闭"},"close"),n&&Y(n)&&(0,s.jsxs)(u.A,{children:[(0,s.jsx)(x.Ay,{type:"primary",danger:!0,onClick:()=>{V(!1),W(n,"reject")},children:"拒绝"}),(0,s.jsx)(x.Ay,{type:"primary",onClick:()=>{V(!1),W(n,"approve")},children:"批准"})]},"actions")],width:700,children:n&&(0,s.jsxs)(p.A,{bordered:!0,column:2,size:"small",className:"mt-4",children:[(0,s.jsxs)(p.A.Item,{label:"申请编号",span:2,children:["RF",n.id.toString().padStart(4,"0")]}),(0,s.jsx)(p.A.Item,{label:"学员姓名",children:n.studentName}),(0,s.jsx)(p.A.Item,{label:"学员ID",children:n.studentId}),(0,s.jsx)(p.A.Item,{label:"申请课程",children:n.course}),(0,s.jsxs)(p.A.Item,{label:"申请金额",children:["\xa5",n.amount]}),(0,s.jsx)(p.A.Item,{label:"申请时间",children:n.applyDate}),(0,s.jsx)(p.A.Item,{label:"申请状态",children:X(n.status)}),(0,s.jsx)(p.A.Item,{label:"退费原因",span:2,children:n.reason}),n.rejectReason&&(0,s.jsx)(p.A.Item,{label:"拒绝原因",span:2,children:n.rejectReason}),(0,s.jsx)(p.A.Item,{label:"初审人员",children:n.reviewer1||"-"}),(0,s.jsx)(p.A.Item,{label:"终审人员",children:n.reviewer2||"-"}),(0,s.jsx)(p.A.Item,{label:"证明材料",span:2,children:(0,s.jsx)(u.A,{children:n.evidence.map((e,t)=>(0,s.jsxs)("div",{className:"border p-1 rounded text-center",children:[(0,s.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded flex items-center justify-center",children:(0,s.jsx)(k.A,{style:{fontSize:32,color:"#1890ff"}})}),(0,s.jsx)("div",{className:"mt-1 text-xs",children:e})]},t))})})]})}),(0,s.jsx)(f.A,{title:"approve"===T?"批准退费申请":"拒绝退费申请",open:_,onCancel:()=>F(!1),onOk:()=>{n&&(t(e.map(e=>{if(e.id===n.id){if("approve"!==T)return{...e,status:"已拒绝",rejectReason:q,reviewer1:e.reviewer1||"当前管理员"};if("待初审"===e.status)return{...e,status:"已确认",reviewer1:"当前管理员"};if("已确认"===e.status)return{...e,status:"已审批",reviewer2:"当前管理员"}}return e})),F(!1),K(""))},okText:"approve"===T?"确认批准":"确认拒绝",okButtonProps:{type:"primary",danger:"reject"===T},children:n&&(0,s.jsxs)(d.A,{layout:"vertical",children:[(0,s.jsx)(d.A.Item,{label:"申请信息",children:(0,s.jsx)(m.A,{size:"small",children:(0,s.jsxs)(p.A,{column:1,size:"small",bordered:!1,children:[(0,s.jsx)(p.A.Item,{label:"学员姓名",children:n.studentName}),(0,s.jsx)(p.A.Item,{label:"申请课程",children:n.course}),(0,s.jsxs)(p.A.Item,{label:"申请金额",children:["\xa5",n.amount]}),(0,s.jsx)(p.A.Item,{label:"退费原因",children:n.reason})]})})}),"approve"===T?(0,s.jsx)(d.A.Item,{label:"审核类型",children:(0,s.jsx)(g.Ay.Group,{defaultValue:"初审",children:(0,s.jsx)(g.Ay,{value:"初审",children:"待初审"===n.status?"初审":"终审"})})}):(0,s.jsx)(d.A.Item,{label:"拒绝原因",required:!0,rules:[{required:!0,message:"请输入拒绝原因"}],children:(0,s.jsx)(E,{rows:4,placeholder:"请输入拒绝退费的原因...",value:q,onChange:e=>K(e.target.value)})})]})})]})}},31511:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(79630),r=a(12115);let l={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};var n=a(62764);let c=r.forwardRef(function(e,t){return r.createElement(n.A,(0,s.A)({},e,{ref:t,icon:l}))})},48169:(e,t,a)=>{Promise.resolve().then(a.bind(a,18105))},48312:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(79630),r=a(12115);let l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};var n=a(62764);let c=r.forwardRef(function(e,t){return r.createElement(n.A,(0,s.A)({},e,{ref:t,icon:l}))})},56203:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(79630),r=a(12115);let l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"};var n=a(62764);let c=r.forwardRef(function(e,t){return r.createElement(n.A,(0,s.A)({},e,{ref:t,icon:l}))})},90765:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(79630),r=a(12115);let l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};var n=a(62764);let c=r.forwardRef(function(e,t){return r.createElement(n.A,(0,s.A)({},e,{ref:t,icon:l}))})}},e=>{var t=t=>e(e.s=t);e.O(0,[2239,6034,4405,7641,6467,7062,7845,4069,6002,4670,6776,8441,1684,7358],()=>t(48169)),_N_E=e.O()}]);