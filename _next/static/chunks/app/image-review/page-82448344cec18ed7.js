(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2143],{85890:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>F});var l=s(95155),r=s(12115),a=s(97605),i=s(20778),n=s(56020),d=s(44670),c=s(37974),o=s(12320),x=s(98617),u=s(30662),h=s(46002),j=s(19361),A=s(74947),v=s(6124),p=s(44297),m=s(94600),g=s(18866),w=s(89631),f=s(48312),y=s(90765),k=s(31511),b=s(52092),I=s(56170),D=s(89123),C=s(88870);let{Title:N,Text:S,Paragraph:z}=a.A,{Option:R}=i.A,{TextArea:U}=n.A,_=[{id:1,studentId:"24100001",studentName:"张三",imageUrl:"/placeholder.svg?height=100&width=100",uploadDate:"2024-01-25 10:30",status:"待审核",reviewer:null,reviewDate:null,rejectReason:null},{id:2,studentId:"24100002",studentName:"王五",imageUrl:"/placeholder.svg?height=100&width=100",uploadDate:"2024-01-24 15:20",status:"已通过",reviewer:"管理员A",reviewDate:"2024-01-24 16:00",rejectReason:null},{id:3,studentId:"24100003",studentName:"李四",imageUrl:"/placeholder.svg?height=100&width=100",uploadDate:"2024-01-23 09:15",status:"已拒绝",reviewer:"管理员B",reviewDate:"2024-01-23 11:30",rejectReason:"相片不清晰，请重新上传"}];function F(){let[e,t]=(0,r.useState)(_),[s,a]=(0,r.useState)(""),[F,O]=(0,r.useState)(null),[T,E]=(0,r.useState)(!1),[L,q]=(0,r.useState)(!1),[B,P]=(0,r.useState)("approve"),[H,K]=(0,r.useState)(""),[V]=d.A.useForm(),W=e.filter(e=>e.studentName.toLowerCase().includes(s.toLowerCase())||e.studentId.includes(s)),G=e=>{O(e),E(!0)},J=(e,t)=>{O(e),P(t),q(!0)},M=s=>{t(e.filter(e=>e.id!==s))},Q=e=>{switch(e){case"待审核":return(0,l.jsx)(c.A,{color:"warning",icon:(0,l.jsx)(f.A,{}),children:"待审核"});case"已通过":return(0,l.jsx)(c.A,{color:"success",icon:(0,l.jsx)(y.A,{}),children:"已通过"});case"已拒绝":return(0,l.jsx)(c.A,{color:"error",icon:(0,l.jsx)(k.A,{}),children:"已拒绝"});default:return(0,l.jsx)(c.A,{children:e})}},X=[{title:"学员信息",key:"student",render:(e,t)=>(0,l.jsxs)(o.A,{direction:"vertical",size:0,children:[(0,l.jsx)(S,{strong:!0,children:t.studentName}),(0,l.jsx)(S,{type:"secondary",children:t.studentId})]})},{title:"相片预览",dataIndex:"imageUrl",key:"imageUrl",render:(e,t)=>(0,l.jsx)(x.A,{width:64,height:64,src:e||"/placeholder.svg",alt:"学员照片",className:"object-cover rounded cursor-pointer",onClick:()=>G(t),preview:!1})},{title:"上传时间",dataIndex:"uploadDate",key:"uploadDate",sorter:(e,t)=>new Date(e.uploadDate).getTime()-new Date(t.uploadDate).getTime()},{title:"审核状态",dataIndex:"status",key:"status",render:e=>Q(e),filters:[{text:"待审核",value:"待审核"},{text:"已通过",value:"已通过"},{text:"已拒绝",value:"已拒绝"}],onFilter:(e,t)=>t.status===e},{title:"审核人员",dataIndex:"reviewer",key:"reviewer",render:e=>e||"-"},{title:"审核时间",dataIndex:"reviewDate",key:"reviewDate",render:e=>e||"-"},{title:"操作",key:"action",render:(e,t)=>(0,l.jsxs)(o.A,{size:"small",children:[(0,l.jsx)(u.Ay,{type:"text",icon:(0,l.jsx)(b.A,{}),onClick:()=>G(t)}),"待审核"===t.status&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Ay,{type:"text",icon:(0,l.jsx)(y.A,{}),className:"text-success hover:text-success/80",onClick:()=>J(t,"approve")}),(0,l.jsx)(u.Ay,{type:"text",icon:(0,l.jsx)(k.A,{}),danger:!0,onClick:()=>J(t,"reject")})]}),("已拒绝"===t.status||"已通过"===t.status)&&(0,l.jsx)(u.Ay,{type:"text",icon:(0,l.jsx)(I.A,{}),danger:!0,onClick:()=>{h.A.confirm({title:"删除相片",content:"确定要删除这张相片吗？学员需要重新上传。",onOk(){M(t.id)}})}})]})}];return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("div",{className:"flex justify-between items-center",children:(0,l.jsxs)("div",{children:[(0,l.jsx)(N,{level:2,children:"相片审核"}),(0,l.jsx)(z,{className:"text-gray-600",children:"审核学员上传的个人照片，确保内容合规"})]})}),(0,l.jsxs)(j.A,{gutter:[16,16],children:[(0,l.jsx)(A.A,{xs:24,sm:12,lg:6,children:(0,l.jsx)(v.A,{hoverable:!0,children:(0,l.jsx)(p.A,{title:"待审核",value:e.filter(e=>"待审核"===e.status).length,prefix:(0,l.jsx)(f.A,{}),suffix:"需要审核的相片",valueStyle:{color:"#faad14"}})})}),(0,l.jsx)(A.A,{xs:24,sm:12,lg:6,children:(0,l.jsx)(v.A,{hoverable:!0,children:(0,l.jsx)(p.A,{title:"已通过",value:e.filter(e=>"已通过"===e.status).length,prefix:(0,l.jsx)(y.A,{}),suffix:"审核通过的相片",valueStyle:{color:"#52c41a"}})})}),(0,l.jsx)(A.A,{xs:24,sm:12,lg:6,children:(0,l.jsx)(v.A,{hoverable:!0,children:(0,l.jsx)(p.A,{title:"已拒绝",value:e.filter(e=>"已拒绝"===e.status).length,prefix:(0,l.jsx)(k.A,{}),suffix:"被拒绝的相片",valueStyle:{color:"#ff4d4f"}})})}),(0,l.jsx)(A.A,{xs:24,sm:12,lg:6,children:(0,l.jsx)(v.A,{hoverable:!0,children:(0,l.jsx)(p.A,{title:"总相片数",value:e.length,prefix:(0,l.jsx)(D.A,{}),suffix:"上传的相片总数",valueStyle:{color:"#1890ff"}})})})]}),(0,l.jsx)(v.A,{title:"相片审核列表",extra:(0,l.jsx)(S,{type:"secondary",children:"学员上传的个人照片审核管理"}),children:(0,l.jsxs)(o.A,{direction:"vertical",style:{width:"100%"},children:[(0,l.jsxs)(j.A,{gutter:16,children:[(0,l.jsx)(A.A,{span:8,children:(0,l.jsx)(n.A,{placeholder:"搜索学员姓名或学号",prefix:(0,l.jsx)(C.A,{}),allowClear:!0,value:s,onChange:e=>a(e.target.value)})}),(0,l.jsx)(A.A,{span:4,children:(0,l.jsxs)(i.A,{defaultValue:"all",style:{width:"100%"},children:[(0,l.jsx)(R,{value:"all",children:"全部状态"}),(0,l.jsx)(R,{value:"pending",children:"待审核"}),(0,l.jsx)(R,{value:"approved",children:"已通过"}),(0,l.jsx)(R,{value:"rejected",children:"已拒绝"})]})})]}),(0,l.jsx)(m.A,{style:{margin:"12px 0"}}),(0,l.jsx)(g.A,{columns:X,dataSource:W,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:e=>"共 ".concat(e," 条记录")}})]})}),(0,l.jsx)(h.A,{title:"相片详情",open:T,onCancel:()=>E(!1),footer:[(0,l.jsx)(u.Ay,{onClick:()=>E(!1),children:"关闭"},"close")],width:700,children:F&&(0,l.jsxs)(o.A,{direction:"vertical",style:{width:"100%"},children:[(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)(x.A,{src:F.imageUrl||"/placeholder.svg",alt:"学员照片",style:{maxWidth:"100%",maxHeight:400},className:"object-contain rounded border"})}),(0,l.jsxs)(w.A,{bordered:!0,column:2,size:"small",children:[(0,l.jsx)(w.A.Item,{label:"学员姓名",children:F.studentName}),(0,l.jsx)(w.A.Item,{label:"学号",children:F.studentId}),(0,l.jsx)(w.A.Item,{label:"上传时间",children:F.uploadDate}),(0,l.jsx)(w.A.Item,{label:"审核状态",children:Q(F.status)}),F.reviewer&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(w.A.Item,{label:"审核人员",children:F.reviewer}),(0,l.jsx)(w.A.Item,{label:"审核时间",children:F.reviewDate})]}),F.rejectReason&&(0,l.jsx)(w.A.Item,{label:"拒绝原因",span:2,children:F.rejectReason})]})]})}),(0,l.jsx)(h.A,{title:"approve"===B?"通过审核":"拒绝相片",open:L,onCancel:()=>q(!1),onOk:()=>{F&&(t(e.map(e=>e.id===F.id?{...e,status:"approve"===B?"已通过":"已拒绝",reviewer:"当前管理员",reviewDate:new Date().toLocaleString("zh-CN"),rejectReason:"reject"===B?H:null}:e)),q(!1),K(""))},okText:"approve"===B?"确认通过":"确认拒绝",okButtonProps:{type:"primary",danger:"reject"===B},children:(0,l.jsxs)(o.A,{direction:"vertical",style:{width:"100%"},children:[(0,l.jsx)(S,{children:"approve"===B?"确认通过此相片审核？":"请填写拒绝原因，学员将需要重新上传"}),"reject"===B&&(0,l.jsx)(d.A.Item,{label:"拒绝原因",required:!0,rules:[{required:!0,message:"请输入拒绝原因"}],children:(0,l.jsx)(U,{rows:4,placeholder:"请详细说明拒绝原因，如：相片不清晰、内容不合规等...",value:H,onChange:e=>K(e.target.value)})})]})})]})}},93352:(e,t,s)=>{Promise.resolve().then(s.bind(s,85890))}},e=>{var t=t=>e(e.s=t);e.O(0,[2239,6034,4405,7641,6467,7062,7845,4069,6002,4670,6776,8106,4819,8441,1684,7358],()=>t(93352)),_N_E=e.O()}]);