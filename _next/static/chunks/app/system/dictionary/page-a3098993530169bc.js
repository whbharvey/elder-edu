(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1199],{24532:(e,l,s)=>{Promise.resolve().then(s.bind(s,72428))},44407:(e,l,s)=>{"use strict";s.d(l,{A:()=>n});var a=s(79630),t=s(12115);let r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};var i=s(62764);let n=t.forwardRef(function(e,l){return t.createElement(i.A,(0,a.A)({},e,{ref:l,icon:r}))})},72428:(e,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>N});var a=s(95155),t=s(12115),r=s(97605),i=s(20778),n=s(56020),d=s(44670),c=s(37974),o=s(12320),h=s(30662),x=s(27212),u=s(6124),j=s(19361),m=s(74947),A=s(94600),p=s(18866),b=s(46002),v=s(25702),y=s(79659),g=s(56170),f=s(44407),C=s(88870),k=s(46996);let{Title:w,Text:S,Paragraph:I}=r.A,{Option:E}=i.A,{TextArea:F}=n.A,z=[{id:1,code:"COURSE_CATEGORY",name:"课程类别",type:"枚举",description:"课程分类字典",status:"启用",items:[{value:"sports",label:"体育健身"},{value:"culture",label:"文化艺术"},{value:"hobby",label:"兴趣爱好"},{value:"skill",label:"技能培训"}]},{id:2,code:"COURSE_LEVEL",name:"课程层次",type:"枚举",description:"课程难度等级",status:"启用",items:[{value:"basic",label:"基础班"},{value:"intermediate",label:"提高班"},{value:"advanced",label:"研学班"}]},{id:3,code:"SEMESTER_TYPE",name:"学期类型",type:"枚举",description:"学期分类",status:"启用",items:[{value:"spring",label:"春季"},{value:"autumn",label:"秋季"},{value:"other",label:"其他"}]}];function N(){let[e,l]=(0,t.useState)(z),[s,r]=(0,t.useState)(""),[N,O]=(0,t.useState)(!1),[_,T]=(0,t.useState)(null),[q,R]=(0,t.useState)(!1),[V]=d.A.useForm(),[L]=d.A.useForm(),[M,H]=(0,t.useState)([]),[U,Y]=(0,t.useState)(!1),[G,P]=(0,t.useState)(null),B=e.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())||e.code.toLowerCase().includes(s.toLowerCase())),K=e=>{T(e),V.setFieldsValue(e),H([...e.items]),R(!0)},D=s=>{l(e.filter(e=>e.id!==s))},J=e=>{Y(!0),P(e),L.setFieldsValue({label:M[e].label})},Q=e=>{let l=[...M];l[e]={...l[e],disabled:!l[e].disabled},H(l)},W=e=>"启用"===e?(0,a.jsx)(c.A,{color:"success",children:"启用"}):(0,a.jsx)(c.A,{color:"error",children:"禁用"}),X=[{title:"字典编码",dataIndex:"code",key:"code",render:e=>(0,a.jsx)(c.A,{color:"blue",className:"font-mono",children:e})},{title:"字典名称",dataIndex:"name",key:"name"},{title:"类型",dataIndex:"type",key:"type",filters:[{text:"枚举",value:"枚举"},{text:"配置",value:"配置"}],onFilter:(e,l)=>l.type===e},{title:"状态",dataIndex:"status",key:"status",render:e=>W(e),filters:[{text:"启用",value:"启用"},{text:"禁用",value:"禁用"}],onFilter:(e,l)=>l.status===e},{title:"字典项数量",key:"itemCount",render:(e,l)=>"".concat(l.items.length," 项")},{title:"描述",dataIndex:"description",key:"description",ellipsis:!0},{title:"操作",key:"action",render:(e,l)=>(0,a.jsxs)(o.A,{size:"small",children:[(0,a.jsx)(h.Ay,{type:"text",icon:(0,a.jsx)(y.A,{}),onClick:()=>K(l)}),(0,a.jsx)(x.A,{title:"删除字典",description:"确定要删除这个数据字典吗？",onConfirm:()=>D(l.id),okText:"确定",cancelText:"取消",children:(0,a.jsx)(h.Ay,{type:"text",danger:!0,icon:(0,a.jsx)(g.A,{})})})]})}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(w,{level:2,children:"数据字典"}),(0,a.jsx)(I,{className:"text-gray-600",children:"管理系统中的枚举值和配置项"})]})}),(0,a.jsx)(u.A,{title:(0,a.jsxs)(o.A,{children:[(0,a.jsx)(f.A,{}),(0,a.jsx)("span",{children:"数据字典列表"})]}),extra:(0,a.jsxs)(S,{type:"secondary",children:["共 ",e.length," 个数据字典"]}),children:(0,a.jsxs)(o.A,{direction:"vertical",style:{width:"100%"},children:[(0,a.jsxs)(j.A,{gutter:16,children:[(0,a.jsx)(m.A,{span:8,children:(0,a.jsx)(n.A,{placeholder:"搜索字典名称或编码",prefix:(0,a.jsx)(C.A,{}),allowClear:!0,value:s,onChange:e=>r(e.target.value)})}),(0,a.jsx)(m.A,{span:4,children:(0,a.jsxs)(i.A,{defaultValue:"all",style:{width:"100%"},children:[(0,a.jsx)(E,{value:"all",children:"全部类型"}),(0,a.jsx)(E,{value:"enum",children:"枚举"}),(0,a.jsx)(E,{value:"config",children:"配置"})]})})]}),(0,a.jsx)(A.A,{style:{margin:"12px 0"}}),(0,a.jsx)(p.A,{columns:X,dataSource:B,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:e=>"共 ".concat(e," 条记录")}})]})}),(0,a.jsx)(b.A,{title:"新增数据字典",open:N,onOk:()=>{V.validateFields().then(s=>{let a={...s,id:Math.max(...e.map(e=>e.id))+1,items:[]};l([...e,a]),O(!1),V.resetFields()})},onCancel:()=>O(!1),width:700,children:(0,a.jsxs)(d.A,{form:V,layout:"vertical",children:[(0,a.jsxs)(j.A,{gutter:16,children:[(0,a.jsx)(m.A,{span:12,children:(0,a.jsx)(d.A.Item,{name:"code",label:"字典编码",rules:[{required:!0,message:"请输入字典编码"}],children:(0,a.jsx)(n.A,{placeholder:"如：COURSE_CATEGORY"})})}),(0,a.jsx)(m.A,{span:12,children:(0,a.jsx)(d.A.Item,{name:"name",label:"字典名称",rules:[{required:!0,message:"请输入字典名称"}],children:(0,a.jsx)(n.A,{placeholder:"如：课程类别"})})})]}),(0,a.jsxs)(j.A,{gutter:16,children:[(0,a.jsx)(m.A,{span:12,children:(0,a.jsx)(d.A.Item,{name:"type",label:"字典类型",rules:[{required:!0,message:"请选择字典类型"}],children:(0,a.jsxs)(i.A,{placeholder:"选择类型",children:[(0,a.jsx)(E,{value:"枚举",children:"枚举"}),(0,a.jsx)(E,{value:"配置",children:"配置"})]})})}),(0,a.jsx)(m.A,{span:12,children:(0,a.jsx)(d.A.Item,{name:"status",label:"状态",rules:[{required:!0,message:"请选择状态"}],children:(0,a.jsxs)(i.A,{placeholder:"选择状态",children:[(0,a.jsx)(E,{value:"启用",children:"启用"}),(0,a.jsx)(E,{value:"禁用",children:"禁用"})]})})})]}),(0,a.jsx)(d.A.Item,{name:"description",label:"描述",children:(0,a.jsx)(F,{rows:3,placeholder:"请输入字典描述"})})]})}),(0,a.jsx)(b.A,{title:"编辑数据字典",open:q,onOk:()=>{V.validateFields().then(s=>{l(e.map(e=>e.id===_.id?{...e,...s,items:M}:e)),R(!1),V.resetFields()})},onCancel:()=>R(!1),width:700,children:(0,a.jsxs)(d.A,{form:V,layout:"vertical",children:[(0,a.jsxs)(j.A,{gutter:16,children:[(0,a.jsx)(m.A,{span:12,children:(0,a.jsx)(d.A.Item,{name:"code",label:"字典编码",rules:[{required:!0,message:"请输入字典编码"}],children:(0,a.jsx)(n.A,{placeholder:"如：COURSE_CATEGORY"})})}),(0,a.jsx)(m.A,{span:12,children:(0,a.jsx)(d.A.Item,{name:"name",label:"字典名称",rules:[{required:!0,message:"请输入字典名称"}],children:(0,a.jsx)(n.A,{placeholder:"如：课程类别"})})})]}),(0,a.jsxs)(j.A,{gutter:16,children:[(0,a.jsx)(m.A,{span:12,children:(0,a.jsx)(d.A.Item,{name:"type",label:"字典类型",rules:[{required:!0,message:"请选择字典类型"}],children:(0,a.jsxs)(i.A,{placeholder:"选择类型",children:[(0,a.jsx)(E,{value:"枚举",children:"枚举"}),(0,a.jsx)(E,{value:"配置",children:"配置"})]})})}),(0,a.jsx)(m.A,{span:12,children:(0,a.jsx)(d.A.Item,{name:"status",label:"状态",rules:[{required:!0,message:"请选择状态"}],children:(0,a.jsxs)(i.A,{placeholder:"选择状态",children:[(0,a.jsx)(E,{value:"启用",children:"启用"}),(0,a.jsx)(E,{value:"禁用",children:"禁用"})]})})})]}),(0,a.jsx)(d.A.Item,{name:"description",label:"描述",children:(0,a.jsx)(F,{rows:3,placeholder:"请输入字典描述"})}),(0,a.jsx)(A.A,{children:"字典项列表"}),(0,a.jsx)(v.A,{bordered:!0,dataSource:M,renderItem:(e,l)=>(0,a.jsx)(v.A.Item,{actions:[(0,a.jsx)(h.Ay,{type:"link",onClick:()=>J(l),children:"编辑"},"edit"),(0,a.jsx)(x.A,{title:e.disabled?"启用字典项":"禁用字典项",description:e.disabled?"确定要启用这个字典项吗？":"确定要禁用这个字典项吗？",onConfirm:()=>Q(l),okText:"确定",cancelText:"取消",children:(0,a.jsx)(h.Ay,{type:"link",danger:!e.disabled,style:{color:e.disabled?"green":void 0},children:e.disabled?"启用":"禁用"})},"toggle")],children:(0,a.jsxs)(o.A,{children:[e.disabled&&(0,a.jsx)(c.A,{color:"error",children:"已禁用"}),(0,a.jsx)("span",{className:e.disabled?"line-through text-gray-400":"",children:e.label})]})}),footer:U?null:(0,a.jsx)(h.Ay,{type:"dashed",onClick:()=>{Y(!0),P(null),L.resetFields()},block:!0,icon:(0,a.jsx)(k.A,{}),children:"添加字典项"})}),U&&(0,a.jsx)("div",{className:"mt-4 p-4 border rounded",children:(0,a.jsx)(d.A,{form:L,layout:"horizontal",children:(0,a.jsxs)(j.A,{gutter:16,className:"flex justify-between",children:[(0,a.jsx)(m.A,{span:10,children:(0,a.jsx)(d.A.Item,{name:"label",label:"显示名称",rules:[{required:!0,message:"请输入显示名称"}],children:(0,a.jsx)(n.A,{placeholder:"如：体育健身"})})}),(0,a.jsx)(m.A,{span:6,className:"flex items-end justify-end",children:(0,a.jsxs)(o.A,{children:[(0,a.jsx)(h.Ay,{onClick:()=>{Y(!1),P(null)},children:"取消"}),(0,a.jsx)(h.Ay,{type:"primary",onClick:()=>{L.validateFields().then(e=>{if(null!==G){let l=[...M];l[G]={...l[G],label:e.label,disabled:l[G].disabled||!1},H(l),P(null)}else H([...M,{value:Math.random().toString(36).substring(2,10),label:e.label,disabled:!1}]);Y(!1),L.resetFields()})},children:"保存"})]})})]})})})]})})]})}}},e=>{var l=l=>e(e.s=l);e.O(0,[2239,6034,4405,7641,6467,7062,7845,4069,6002,4670,7238,2393,8441,1684,7358],()=>l(24532)),_N_E=e.O()}]);