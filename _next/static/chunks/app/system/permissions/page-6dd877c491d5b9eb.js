(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1261],{44610:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>M});var l=a(95155),n=a(12115),i=a(97605),r=a(20778),t=a(35125),d=a(44670),c=a(37974),o=a(12320),m=a(30662),x=a(27212),u=a(56020),h=a(6124),j=a(18866),p=a(19361),A=a(74947),y=a(46002),g=a(21103),v=a(79659),f=a(56170),w=a(50274),C=a(88870),b=a(46996),_=a(79630);let k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M608 112c-167.9 0-304 136.1-304 304 0 70.3 23.9 135 63.9 186.5l-41.1 41.1-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-44.9 44.9-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-65.3 65.3a8.03 8.03 0 000 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6A304.06 304.06 0 00608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644c-60.9 0-118.2-23.7-161.2-66.8-43.1-43-66.8-100.3-66.8-161.2 0-60.9 23.7-118.2 66.8-161.2 43-43.1 100.3-66.8 161.2-66.8 60.9 0 118.2 23.7 161.2 66.8 43.1 43 66.8 100.3 66.8 161.2 0 60.9-23.7 118.2-66.8 161.2z"}}]},name:"key",theme:"outlined"};var N=a(62764),I=n.forwardRef(function(e,s){return n.createElement(N.A,(0,_.A)({},e,{ref:s,icon:k}))});let{Title:S,Text:L,Paragraph:z}=i.A,{Option:F}=r.A,{TabPane:q}=t.A,O=[{id:1,username:"admin",name:"超级管理员",email:"admin@example.com",role:"超级管理员",status:"正常",lastLogin:"2024-01-25 10:30",permissions:["all"]},{id:2,username:"manager1",name:"管理员A",email:"manager1@example.com",role:"管理员",status:"正常",lastLogin:"2024-01-25 09:15",permissions:["course_manage","student_manage","refund_review"]},{id:3,username:"operator1",name:"操作员B",email:"operator1@example.com",role:"操作员",status:"禁用",lastLogin:"2024-01-20 14:20",permissions:["course_view","student_view"]}],T=[{id:1,name:"超级管理员",code:"super_admin",description:"拥有系统所有权限",userCount:1,permissions:["all"]},{id:2,name:"管理员",code:"admin",description:"拥有业务管理权限",userCount:5,permissions:["course_manage","student_manage","refund_review","batch_manage"]},{id:3,name:"操作员",code:"operator",description:"拥有基础操作权限",userCount:8,permissions:["course_view","student_view"]}],E=[{code:"course_manage",name:"课程管理",module:"课程模块"},{code:"course_view",name:"课程查看",module:"课程模块"},{code:"student_manage",name:"学员管理",module:"学员模块"},{code:"student_view",name:"学员查看",module:"学员模块"},{code:"refund_review",name:"退费审核",module:"退费模块"},{code:"refund_view",name:"退费查看",module:"退费模块"},{code:"batch_manage",name:"批次管理",module:"报名模块"},{code:"system_manage",name:"系统管理",module:"系统模块"}];function M(){let[e,s]=(0,n.useState)(O),[a,i]=(0,n.useState)(T),[_,k]=(0,n.useState)(""),[N,M]=(0,n.useState)(!1),[B,K]=(0,n.useState)(!1),[R]=d.A.useForm(),G=e.filter(e=>e.name.toLowerCase().includes(_.toLowerCase())||e.username.toLowerCase().includes(_.toLowerCase())||e.email.toLowerCase().includes(_.toLowerCase())),P=a.filter(e=>e.name.toLowerCase().includes(_.toLowerCase())),V=e=>"正常"===e?(0,l.jsx)(c.A,{color:"success",children:"正常"}):(0,l.jsx)(c.A,{color:"error",children:"禁用"}),D=a=>{s(e.filter(e=>e.id!==a))},H=e=>{i(a.filter(s=>s.id!==e))},J=[{title:"用户名",dataIndex:"username",key:"username"},{title:"姓名",dataIndex:"name",key:"name"},{title:"邮箱",dataIndex:"email",key:"email"},{title:"角色",dataIndex:"role",key:"role",render:e=>(0,l.jsx)(c.A,{children:e})},{title:"状态",dataIndex:"status",key:"status",render:e=>V(e)},{title:"最后登录",dataIndex:"lastLogin",key:"lastLogin"},{title:"操作",key:"action",render:(e,s)=>(0,l.jsxs)(o.A,{size:"small",children:[(0,l.jsx)(m.Ay,{type:"text",icon:(0,l.jsx)(v.A,{})}),(0,l.jsx)(x.A,{title:"删除用户",description:"确定要删除这个用户吗？",onConfirm:()=>D(s.id),okText:"确定",cancelText:"取消",children:(0,l.jsx)(m.Ay,{type:"text",danger:!0,icon:(0,l.jsx)(f.A,{})})})]})}],Q=[{title:"角色名称",dataIndex:"name",key:"name"},{title:"角色编码",dataIndex:"code",key:"code",render:e=>(0,l.jsx)(c.A,{color:"blue",className:"font-mono",children:e})},{title:"描述",dataIndex:"description",key:"description",ellipsis:!0},{title:"用户数量",key:"userCount",render:(e,s)=>"".concat(s.userCount," 人")},{title:"权限数量",key:"permissionCount",render:(e,s)=>"".concat(s.permissions.length," 项")},{title:"操作",key:"action",render:(e,s)=>(0,l.jsxs)(o.A,{size:"small",children:[(0,l.jsx)(m.Ay,{type:"text",icon:(0,l.jsx)(v.A,{})}),(0,l.jsx)(x.A,{title:"删除角色",description:"确定要删除这个角色吗？",onConfirm:()=>H(s.id),okText:"确定",cancelText:"取消",children:(0,l.jsx)(m.Ay,{type:"text",danger:!0,icon:(0,l.jsx)(f.A,{})})})]})}];return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("div",{className:"flex justify-between items-center",children:(0,l.jsxs)("div",{children:[(0,l.jsx)(S,{level:2,children:"权限管理"}),(0,l.jsx)(z,{className:"text-gray-600",children:"管理用户角色和系统访问权限"})]})}),(0,l.jsxs)(t.A,{defaultActiveKey:"users",children:[(0,l.jsx)(q,{tab:(0,l.jsxs)("span",{children:[(0,l.jsx)(w.A,{}),"用户管理"]}),children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)(u.A,{placeholder:"搜索用户",prefix:(0,l.jsx)(C.A,{}),allowClear:!0,value:_,onChange:e=>k(e.target.value),style:{width:300}}),(0,l.jsx)(m.Ay,{type:"primary",icon:(0,l.jsx)(b.A,{}),onClick:()=>{R.resetFields(),M(!0)},children:"新增用户"})]}),(0,l.jsx)(h.A,{title:"用户列表",extra:(0,l.jsxs)(L,{type:"secondary",children:["共 ",e.length," 个用户"]}),children:(0,l.jsx)(j.A,{columns:J,dataSource:G,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:e=>"共 ".concat(e," 条记录")}})})]})},"users"),(0,l.jsx)(q,{tab:(0,l.jsxs)("span",{children:[(0,l.jsx)(w.A,{}),"角色管理"]}),children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)(u.A,{placeholder:"搜索角色",prefix:(0,l.jsx)(C.A,{}),allowClear:!0,value:_,onChange:e=>k(e.target.value),style:{width:300}}),(0,l.jsx)(m.Ay,{type:"primary",icon:(0,l.jsx)(b.A,{}),onClick:()=>{R.resetFields(),K(!0)},children:"新增角色"})]}),(0,l.jsx)(h.A,{title:"角色列表",extra:(0,l.jsxs)(L,{type:"secondary",children:["共 ",a.length," 个角色"]}),children:(0,l.jsx)(j.A,{columns:Q,dataSource:P,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:e=>"共 ".concat(e," 条记录")}})})]})},"roles"),(0,l.jsx)(q,{tab:(0,l.jsxs)("span",{children:[(0,l.jsx)(I,{}),"权限列表"]}),children:(0,l.jsx)(h.A,{title:"系统权限列表",extra:(0,l.jsx)(L,{type:"secondary",children:"系统中所有可分配的权限"}),children:(0,l.jsx)("div",{className:"space-y-6",children:Object.entries(E.reduce((e,s)=>(e[s.module]||(e[s.module]=[]),e[s.module].push(s),e),{})).map(e=>{let[s,a]=e;return(0,l.jsxs)("div",{children:[(0,l.jsxs)(S,{level:4,className:"flex items-center gap-2 mb-3",children:[(0,l.jsx)(I,{}),s]}),(0,l.jsx)(p.A,{gutter:[16,16],children:a.map(e=>(0,l.jsx)(A.A,{span:8,children:(0,l.jsx)(h.A,{size:"small",className:"bg-gray-50",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium",children:e.name}),(0,l.jsx)(L,{type:"secondary",className:"text-xs font-mono",children:e.code})]}),(0,l.jsx)(c.A,{children:e.module})]})})},e.code))})]},s)})})})},"permissions")]}),(0,l.jsx)(y.A,{title:"新增用户",open:N,onOk:()=>{R.validateFields().then(a=>{let l={...a,id:Math.max(...e.map(e=>e.id))+1,lastLogin:"从未登录",permissions:[]};s([...e,l]),M(!1),R.resetFields()})},onCancel:()=>M(!1),width:600,children:(0,l.jsxs)(d.A,{form:R,layout:"vertical",children:[(0,l.jsxs)(p.A,{gutter:16,children:[(0,l.jsx)(A.A,{span:12,children:(0,l.jsx)(d.A.Item,{name:"username",label:"用户名",rules:[{required:!0,message:"请输入用户名"}],children:(0,l.jsx)(u.A,{placeholder:"请输入用户名"})})}),(0,l.jsx)(A.A,{span:12,children:(0,l.jsx)(d.A.Item,{name:"name",label:"姓名",rules:[{required:!0,message:"请输入姓名"}],children:(0,l.jsx)(u.A,{placeholder:"请输入姓名"})})})]}),(0,l.jsx)(d.A.Item,{name:"email",label:"邮箱",rules:[{required:!0,message:"请输入邮箱"},{type:"email",message:"请输入有效的邮箱地址"}],children:(0,l.jsx)(u.A,{placeholder:"请输入邮箱"})}),(0,l.jsx)(d.A.Item,{name:"role",label:"角色",rules:[{required:!0,message:"请选择角色"}],children:(0,l.jsxs)(r.A,{placeholder:"选择角色",children:[(0,l.jsx)(F,{value:"管理员",children:"管理员"}),(0,l.jsx)(F,{value:"操作员",children:"操作员"})]})}),(0,l.jsx)(d.A.Item,{name:"status",label:"状态",initialValue:"正常",children:(0,l.jsxs)(r.A,{children:[(0,l.jsx)(F,{value:"正常",children:"正常"}),(0,l.jsx)(F,{value:"禁用",children:"禁用"})]})})]})}),(0,l.jsx)(y.A,{title:"新增角色",open:B,onOk:()=>{R.validateFields().then(e=>{let s={...e,id:Math.max(...a.map(e=>e.id))+1,userCount:0,permissions:e.permissions||[]};i([...a,s]),K(!1),R.resetFields()})},onCancel:()=>K(!1),width:800,children:(0,l.jsxs)(d.A,{form:R,layout:"vertical",children:[(0,l.jsxs)(p.A,{gutter:16,children:[(0,l.jsx)(A.A,{span:12,children:(0,l.jsx)(d.A.Item,{name:"name",label:"角色名称",rules:[{required:!0,message:"请输入角色名称"}],children:(0,l.jsx)(u.A,{placeholder:"请输入角色名称"})})}),(0,l.jsx)(A.A,{span:12,children:(0,l.jsx)(d.A.Item,{name:"code",label:"角色编码",rules:[{required:!0,message:"请输入角色编码"}],children:(0,l.jsx)(u.A,{placeholder:"请输入角色编码"})})})]}),(0,l.jsx)(d.A.Item,{name:"description",label:"角色描述",children:(0,l.jsx)(u.A,{placeholder:"请输入角色描述"})}),(0,l.jsx)(d.A.Item,{name:"permissions",label:"权限分配",children:(0,l.jsx)("div",{className:"border rounded-lg p-4 max-h-60 overflow-y-auto",children:(0,l.jsx)(g.A.Group,{style:{width:"100%"},children:(0,l.jsx)("div",{className:"space-y-3",children:Object.entries(E.reduce((e,s)=>(e[s.module]||(e[s.module]=[]),e[s.module].push(s),e),{})).map(e=>{let[s,a]=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium text-sm mb-2",children:s}),(0,l.jsx)(p.A,{className:"ml-4",children:a.map(e=>(0,l.jsx)(A.A,{span:12,children:(0,l.jsx)(g.A,{value:e.code,children:e.name})},e.code))})]},s)})})})})})]})})]})}},50274:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});var l=a(79630),n=a(12115);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};var r=a(62764);let t=n.forwardRef(function(e,s){return n.createElement(r.A,(0,l.A)({},e,{ref:s,icon:i}))})},90324:(e,s,a)=>{Promise.resolve().then(a.bind(a,44610))}},e=>{var s=s=>e(e.s=s);e.O(0,[2239,6034,4405,7641,6467,7062,7845,4069,6002,4670,7238,8441,1684,7358],()=>s(90324)),_N_E=e.O()}]);