(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6759],{52359:(e,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>E});var t=s(95155),n=s(12115),r=s(97605),i=s(56020),a=s(44670),d=s(19868),c=s(95108),o=s(6124),h=s(30662),x=s(18866),u=s(12320),j=s(46002),m=s(19361),y=s(74947),p=s(20778),A=s(1175),g=s(94804),f=s(98617),v=s(40344),b=s(26922),k=s(35125),D=s(24073),w=s(46996),I=s(56203),N=s(19558),C=s(98790),O=s(13921),R=s(92611),S=s(12133),P=s(55028);s(21400);let q=(0,P.default)(()=>Promise.all([s.e(2800),s.e(9820)]).then(s.bind(s,59820)).then(e=>e.Editor),{loadableGenerated:{webpack:()=>[59820]},ssr:!1}),Y=(0,P.default)(()=>Promise.all([s.e(2800),s.e(9820)]).then(s.bind(s,59820)).then(e=>e.Toolbar),{loadableGenerated:{webpack:()=>[59820]},ssr:!1});function T(e){let{initialValue:l="",onChange:s,style:r}=e,[i,a]=(0,n.useState)(null),[d,c]=(0,n.useState)(l);return(0,n.useEffect)(()=>()=>{null!=i&&(i.destroy(),a(null))},[i]),(0,t.jsxs)("div",{style:{border:"1px solid #d1d5db",borderRadius:"0.375rem",overflow:"hidden"},children:[(0,t.jsx)(Y,{editor:i,defaultConfig:{},mode:"default",style:{borderBottom:"1px solid #ccc"}}),(0,t.jsx)(q,{defaultConfig:{placeholder:"请输入内容..."},value:d,onCreated:a,onChange:e=>{let l=e.getHtml();c(l),null==s||s(l)},mode:"default",style:r||{height:"500px",overflowY:"hidden"}})]})}var F=s(30832),G=s.n(F);let{Title:M,Text:V,Paragraph:_}=r.A,{TextArea:z}=i.A;function E(){let[e]=a.A.useForm(),[l]=a.A.useForm(),[s,r]=(0,n.useState)(!1),[i,P]=(0,n.useState)("/placeholder.svg?height=100&width=100"),[q,Y]=(0,n.useState)(!1),[F,z]=(0,n.useState)(null),[E,B]=(0,n.useState)("<h2>报名须知</h2>\n<p>欢迎报名广州老年开放大学课程，请仔细阅读以下报名须知：</p>\n\n<h3>一、报名条件</h3>\n<ul>\n  <li>年满50周岁的广州市户籍居民或在广州居住的老年人</li>\n  <li>身体健康，能够正常参与课程学习</li>\n  <li>具备基本的学习能力和自理能力</li>\n</ul>\n\n<h3>二、报名流程</h3>\n<ol>\n  <li>在线填写报名信息</li>\n  <li>上传相关证件照片</li>\n  <li>选择课程和班级</li>\n  <li>在线支付学费</li>\n  <li>等待审核确认</li>\n</ol>\n\n<h3>三、注意事项</h3>\n<ul>\n  <li>请确保填写信息真实有效</li>\n  <li>每人每学期最多可报名3门课程</li>\n  <li>课程开始后不予退费</li>\n  <li>如有疑问请联系招生办公室</li>\n</ul>\n\n<h3>四、联系方式</h3>\n<p>招生咨询电话：020-12345678</p>\n<p>办公时间：周一至周五 9:00-17:00</p>"),U=async e=>{r(!0);try{console.log("保存设置:",{...e,noticeContent:E,qrCodeUrl:i}),await new Promise(e=>setTimeout(e,1e3)),d.Ay.success("设置保存成功!")}catch(e){d.Ay.error("保存失败，请重试!")}finally{r(!1)}},J=e=>{z(e),l.resetFields(),e&&l.setFieldsValue({year:e.year,term:e.term,dateRange:[e.startDate?G()(e.startDate):null,e.endDate?G()(e.endDate):null]}),Y(!0)},H=()=>{Y(!1),z(null)},L=[{key:"semester",label:(0,t.jsxs)("span",{children:[(0,t.jsx)(D.A,{}),"学期设置"]}),children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(c.A,{message:"学期时间设置",description:"设置每个学期的起始日期和结束日期，用于控制招生时间段和课程安排。",type:"info",showIcon:!0,className:"mb-4"}),(0,t.jsx)(o.A,{title:"学期列表",extra:(0,t.jsx)(h.Ay,{type:"primary",icon:(0,t.jsx)(w.A,{}),onClick:()=>J(),children:"添加学期"}),children:(0,t.jsx)(x.A,{dataSource:[{key:"1",year:"2023",term:"春季",startDate:"2023-03-01",endDate:"2023-07-15"},{key:"2",year:"2023",term:"秋季",startDate:"2023-09-01",endDate:"2024-01-15"},{key:"3",year:"2022",term:"秋季",startDate:"2022-09-01",endDate:"2023-01-15"},{key:"4",year:"2022",term:"春季",startDate:"2022-03-01",endDate:"2022-07-15"},{key:"5",year:"2024",term:"春季",startDate:"2024-03-01",endDate:"2024-07-15"}],columns:[{title:"年份",dataIndex:"year",key:"year",sorter:(e,l)=>parseInt(e.year)-parseInt(l.year)},{title:"学期",dataIndex:"term",key:"term",sorter:(e,l)=>e.term.localeCompare(l.term),filters:[{text:"春季",value:"春季"},{text:"秋季",value:"秋季"}],onFilter:(e,l)=>l.term===e},{title:"开始日期",dataIndex:"startDate",key:"startDate",sorter:(e,l)=>new Date(e.startDate).getTime()-new Date(l.startDate).getTime(),defaultSortOrder:"descend"},{title:"结束日期",dataIndex:"endDate",key:"endDate",sorter:(e,l)=>new Date(e.endDate).getTime()-new Date(l.endDate).getTime()},{title:"操作",key:"action",render:(e,l)=>(0,t.jsxs)(u.A,{size:"middle",children:[(0,t.jsx)(h.Ay,{type:"link",onClick:()=>J(l),children:"编辑"}),(0,t.jsx)(h.Ay,{type:"link",danger:!0,onClick:()=>{j.A.confirm({title:"确认删除",content:"确定要删除 ".concat(l.year,"年").concat(l.term,"学期吗？"),onOk(){d.Ay.success("删除成功")}})},children:"删除"})]})}],pagination:{pageSize:5}})}),(0,t.jsx)(j.A,{title:"".concat(F?"编辑":"添加","学期"),open:q,onCancel:H,footer:[(0,t.jsx)(h.Ay,{onClick:H,children:"取消"},"cancel"),(0,t.jsx)(h.Ay,{type:"primary",loading:s,onClick:()=>{l.validateFields().then(e=>{r(!0),setTimeout(()=>{console.log("保存学期:",e),d.Ay.success("".concat(F?"更新":"添加","学期成功!")),r(!1),Y(!1),z(null)},500)}).catch(e=>{console.log("验证失败:",e)})},children:"保存"},"submit")],children:(0,t.jsxs)(a.A,{form:l,layout:"vertical",children:[(0,t.jsxs)(m.A,{gutter:16,children:[(0,t.jsx)(y.A,{span:12,children:(0,t.jsx)(a.A.Item,{name:"year",label:"年份",rules:[{required:!0,message:"请选择年份"}],children:(0,t.jsx)(p.A,{placeholder:"请选择年份",children:[2022,2023,2024,2025,2026].map(e=>(0,t.jsx)(p.A.Option,{value:e.toString(),children:e},e))})})}),(0,t.jsx)(y.A,{span:12,children:(0,t.jsx)(a.A.Item,{name:"term",label:"学期",rules:[{required:!0,message:"请选择学期"}],children:(0,t.jsxs)(p.A,{placeholder:"请选择学期",children:[(0,t.jsx)(p.A.Option,{value:"春季",children:"春季"}),(0,t.jsx)(p.A.Option,{value:"秋季",children:"秋季"})]})})})]}),(0,t.jsx)(a.A.Item,{name:"dateRange",label:"学期起止日期",rules:[{required:!0,message:"请选择学期起止日期"}],children:(0,t.jsx)(A.A.RangePicker,{style:{width:"100%"},format:"YYYY-MM-DD",placeholder:["开始日期","结束日期"]})})]})})]})},{key:"notice",label:(0,t.jsxs)("span",{children:[(0,t.jsx)(I.A,{}),"报名须知设置"]}),children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(c.A,{message:"报名须知设置说明",description:"此处设置的内容将在学员报名时显示，请确保信息准确完整。支持富文本格式，可以添加标题、列表、链接等。",type:"info",showIcon:!0,className:"mb-4"}),(0,t.jsx)(o.A,{title:"报名须知内容编辑",extra:(0,t.jsx)(V,{type:"secondary",children:"支持富文本格式"}),children:(0,t.jsx)(T,{initialValue:E,onChange:B,style:{height:"400px"}})}),(0,t.jsx)("div",{className:"flex justify-end mt-4",children:(0,t.jsx)(h.Ay,{type:"primary",icon:(0,t.jsx)(N.A,{}),loading:s,onClick:()=>U({noticeContent:E}),children:"保存报名须知"})})]})},{key:"qrcode",label:(0,t.jsxs)("span",{children:[(0,t.jsx)(C.A,{}),"招生小助手"]}),children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(c.A,{message:"招生小助手二维码设置",description:"上传招生小助手的微信二维码，学员可以通过扫码获得报名咨询服务。建议上传清晰的二维码图片，尺寸不超过2MB。",type:"info",showIcon:!0,className:"mb-4"}),(0,t.jsxs)(m.A,{gutter:[24,24],children:[(0,t.jsx)(y.A,{xs:24,lg:12,children:(0,t.jsx)(o.A,{title:"二维码上传",extra:(0,t.jsx)(V,{type:"secondary",children:"支持 JPG、PNG 格式"}),children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)(g.A,{name:"file",action:"/api/upload",accept:"image/*",showUploadList:!1,beforeUpload:e=>e.type.startsWith("image/")?e.size/1024/1024<2||(d.Ay.error("图片大小不能超过 2MB!"),!1):(d.Ay.error("只能上传图片文件!"),!1),onChange:e=>{if("uploading"===e.file.status&&r(!0),"done"===e.file.status){var l;r(!1),P((null===(l=e.file.response)||void 0===l?void 0:l.url)||"https://via.placeholder.com/200x200/f0f0f0/999999?text=QR+Code"),d.Ay.success("二维码上传成功!")}"error"===e.file.status&&(r(!1),d.Ay.error("二维码上传失败!"))},children:(0,t.jsx)(h.Ay,{icon:(0,t.jsx)(O.A,{}),loading:s,size:"large",children:s?"上传中...":"选择图片"})}),(0,t.jsxs)("div",{className:"text-gray-500 text-sm",children:[(0,t.jsx)("p",{children:"• 支持 JPG、PNG 格式"}),(0,t.jsx)("p",{children:"• 图片大小不超过 2MB"}),(0,t.jsx)("p",{children:"• 建议尺寸 200x200 像素"})]})]})})}),(0,t.jsx)(y.A,{xs:24,lg:12,children:(0,t.jsx)(o.A,{title:"当前二维码",extra:(0,t.jsx)(V,{type:"secondary",children:"学员端显示效果"}),children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(f.A,{width:200,height:200,src:i,alt:"招生小助手二维码",placeholder:(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:(0,t.jsx)(C.A,{style:{fontSize:48,color:"#d9d9d9"}})})}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)(V,{strong:!0,children:"招生小助手"}),(0,t.jsx)("br",{}),(0,t.jsx)(V,{type:"secondary",children:"扫码咨询报名事宜"})]})]})})})]}),(0,t.jsx)("div",{className:"flex justify-end mt-4",children:(0,t.jsx)(h.Ay,{type:"primary",icon:(0,t.jsx)(N.A,{}),loading:s,onClick:()=>U({qrCodeUrl:i}),children:"保存二维码设置"})})]})},{key:"refund",label:(0,t.jsxs)("span",{children:[(0,t.jsx)(R.A,{}),"退费设置"]}),children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(c.A,{message:"退费设置说明",description:"开启学员退费申请后，此处相关内容将在学员退费时显示，请确保信息准确完整。",type:"info",showIcon:!0}),(0,t.jsx)(o.A,{title:"退费申请设置",children:(0,t.jsxs)(a.A,{layout:"vertical",children:[(0,t.jsx)(a.A.Item,{name:"allowRefund",label:"是否允许学员申请退费",rules:[{required:!0,message:"请选择是否允许退费"}],children:(0,t.jsxs)(v.Ay.Group,{defaultValue:!1,children:[(0,t.jsx)(v.Ay,{value:!1,children:"不允许"}),(0,t.jsx)(v.Ay,{value:!0,children:"允许"})]})}),(0,t.jsx)(a.A.Item,{noStyle:!0,shouldUpdate:(e,l)=>e.allowRefund!==l.allowRefund,children:e=>{let{getFieldValue:l}=e;return!0===l("allowRefund")?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.A.Item,{name:"refundTimeRange",label:"退费申请时间范围",rules:[{required:!0,message:"请设置退费申请时间范围"}],children:(0,t.jsx)(m.A,{gutter:16,children:(0,t.jsx)(y.A,{span:24,children:(0,t.jsx)(a.A.Item,{name:"refundDateRange",noStyle:!0,rules:[{required:!0,message:"请选择退费时间范围"}],children:(0,t.jsx)(A.A.RangePicker,{style:{width:"100%"},placeholder:["开始日期","结束日期"],format:"YYYY-MM-DD"})})})})}),(0,t.jsx)(a.A.Item,{name:"refundPolicy",label:(0,t.jsxs)("span",{children:["退费政策 ",(0,t.jsx)(b.A,{title:"退费政策说明，如退费比例、时间限制等",children:(0,t.jsx)(S.A,{})})]}),rules:[{required:!0,message:"请输入退费政策"}],children:(0,t.jsx)(T,{initialValue:"<ol><li>开课前一周内申请退费，退还学费的90%；</li><li>课程进行1/3前申请退费，退还学费的70%；</li><li>课程进行1/2前申请退费，退还学费的50%；</li><li>课程超过一半不予退费。</li></ol>",style:{height:200}})})]}):null}})]})}),(0,t.jsx)(o.A,{title:"退费审核流程设置",children:(0,t.jsx)(a.A,{layout:"vertical",children:(0,t.jsxs)(m.A,{gutter:16,children:[(0,t.jsx)(y.A,{span:12,children:(0,t.jsx)(a.A.Item,{name:"firstReviewer",label:"初审人员",rules:[{required:!0,message:"请选择初审人员"}],children:(0,t.jsxs)(p.A,{placeholder:"请选择初审人员",defaultValue:"王明 (139****1234)",children:[(0,t.jsx)(p.A.Option,{value:"王明 (139****1234)",children:"王明 (139****1234)"}),(0,t.jsx)(p.A.Option,{value:"李梅 (158****5678)",children:"李梅 (158****5678)"}),(0,t.jsx)(p.A.Option,{value:"张伟 (136****9012)",children:"张伟 (136****9012)"}),(0,t.jsx)(p.A.Option,{value:"赵敏 (132****3456)",children:"赵敏 (132****3456)"})]})})}),(0,t.jsx)(y.A,{span:12,children:(0,t.jsx)(a.A.Item,{name:"secondReviewer",label:"终审人员",rules:[{required:!0,message:"请选择终审人员"}],children:(0,t.jsxs)(p.A,{placeholder:"请选择终审人员",defaultValue:"陈刚 (151****7890)",children:[(0,t.jsx)(p.A.Option,{value:"陈刚 (151****7890)",children:"陈刚 (151****7890)"}),(0,t.jsx)(p.A.Option,{value:"周丽 (137****4321)",children:"周丽 (137****4321)"}),(0,t.jsx)(p.A.Option,{value:"刘强 (186****6543)",children:"刘强 (186****6543)"}),(0,t.jsx)(p.A.Option,{value:"郑华 (159****8765)",children:"郑华 (159****8765)"})]})})})]})})}),(0,t.jsx)(a.A.Item,{children:(0,t.jsx)(h.Ay,{type:"primary",icon:(0,t.jsx)(N.A,{}),children:"保存退费设置"})})]})}];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M,{level:2,children:"招生全局设置"}),(0,t.jsx)(_,{className:"text-gray-600",children:"招生学期时间配置、报名须知、招生小助手二维码和其他招生相关设置"})]}),(0,t.jsx)(o.A,{children:(0,t.jsx)(k.A,{items:L})})]})}},78670:(e,l,s)=>{Promise.resolve().then(s.bind(s,52359))}},e=>{var l=l=>e(e.s=l);e.O(0,[8745,2239,6034,4405,7641,6467,7062,7845,4069,6002,4670,1175,9868,8106,1218,4695,8441,1684,7358],()=>l(78670)),_N_E=e.O()}]);